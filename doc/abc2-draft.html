<!--  $Id: abc2-draft.html,v 1.6 2003/10/01 10:53:35 ioppenhm Exp $ -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>The ABC Music standard 2.0&nbsp;(draft IV, 14/8/2003)</title>
	<meta name="author" content="Irwin Oppenheim">
	<meta name="GENERATOR" content="Almost Free Text v5.09; Copyright 1996-2003 Todd Coram. All rights reserved.">
<style type="text/css">
  <!--
	.Default {background-color: rgb(255,255,255); color: rgb(0,0,0); font-family: 'Tahoma'; font-size: 12pt}
	.Text-Background {background-color: rgb(255,255,255)}
  -->
</style>
</head>
<body>

<br><center><h1><a name="AFT-top">The ABC Music standard 2.0&nbsp;(draft IV, 14/8/2003)</a></h1></center>
<br><center><h2>Irwin Oppenheim</h2></center>
<!--  AFT Table of Contents (auto generated) -->
<ul>
<li> <a href="#Introduction">1. Introduction</a></li>
<li> <a href="#File%20structure">2. File structure</a></li>
<ul>
<li> <a href="#Remarks">2.1. Remarks</a></li>
<li> <a href="#Continuation%20of%20input%20lines">2.2. Continuation of input lines</a></li>
<li> <a href="#Line%20breaking">2.3. Line breaking</a></li>
</ul>
<li> <a href="#Information%20fields">3. Information fields</a></li>
<ul>
<li> <a href="#Description">3.1. Description</a></li>
<ul>
<li> <a href="#X:%20-%20reference%20number">3.1.1. X: - reference number</a></li>
<li> <a href="#T:%20-%20tune%20title">3.1.2. T: - tune title</a></li>
<li> <a href="#C:%20-%20composer">3.1.3. C: - composer</a></li>
<li> <a href="#O:%20-%20origin">3.1.4. O: - origin</a></li>
<li> <a href="#A:%20-%20author%20of%20lyrics">3.1.5. A: - author of lyrics</a></li>
<li> <a href="#M:%20-%20meter">3.1.6. M: - meter</a></li>
<li> <a href="#L:%20-%20unit%20note%20length">3.1.7. L: - unit note length</a></li>
<li> <a href="#Q:%20-%20tempo">3.1.8. Q: - tempo</a></li>
<li> <a href="#P:%20-%20parts">3.1.9. P: - parts</a></li>
<li> <a href="#Z:%20transcriber">3.1.10. Z: transcriber</a></li>
<li> <a href="#N:%20-%20notes">3.1.11. N: - notes</a></li>
<li> <a href="#G:%20-%20group">3.1.12. G: - group</a></li>
<li> <a href="#H:%20-%20history">3.1.13. H: - history</a></li>
<li> <a href="#K:%20-%20key">3.1.14. K: - key</a></li>
<li> <a href="#Other%20fields">3.1.15. Other fields</a></li>
</ul>
<li> <a href="#Use%20of%20fields%20within%20body">3.2. Use of fields within body</a></li>
<li> <a href="#Extended%20information%20fields">3.3. Extended information fields</a></li>
<ul>
<li> <a href="#Copyright%20field">3.3.1. Copyright field</a></li>
<li> <a href="#Version%20field">3.3.2. Version field</a></li>
<li> <a href="#Creator%20field">3.3.3. Creator field</a></li>
<li> <a href="#Charset%20field">3.3.4. Charset field</a></li>
<li> <a href="#Include%20field">3.3.5. Include field</a></li>
<li> <a href="#Edited-by%20field">3.3.6. Edited-by field</a></li>
</ul>
</ul>
<li> <a href="#The%20tune%20body">4. The tune body</a></li>
<ul>
<li> <a href="#Pitch">4.1. Pitch</a></li>
<li> <a href="#Accidentals">4.2. Accidentals</a></li>
<li> <a href="#Note%20lengths">4.3. Note lengths</a></li>
<li> <a href="#Broken%20rhythm">4.4. Broken rhythm</a></li>
<li> <a href="#Rests">4.5. Rests</a></li>
<li> <a href="#Spacer">4.6. Spacer</a></li>
<li> <a href="#Beams">4.7. Beams</a></li>
<li> <a href="#Repeat/bar%20symbols">4.8. Repeat/bar symbols</a></li>
<li> <a href="#First%20and%20second%20repeats">4.9. First and second repeats</a></li>
<li> <a href="#Variant%20Endings">4.10. Variant Endings</a></li>
<li> <a href="#Ties%20and%20slurs">4.11. Ties and slurs</a></li>
<li> <a href="#Grace%20notes">4.12. Grace notes</a></li>
<li> <a href="#Duplets,%20triplets,%20quadruplets,%20etc.">4.13. Duplets, triplets, quadruplets, etc.</a></li>
<li> <a href="#Decorations">4.14. Decorations</a></li>
<li> <a href="#Symbol%20lines">4.15. Symbol lines</a></li>
<li> <a href="#Redefinable%20symbols">4.16. Redefinable symbols</a></li>
<li> <a href="#Chords%20and%20unisons">4.17. Chords and unisons</a></li>
<li> <a href="#Chord%20symbols">4.18. Chord symbols</a></li>
<li> <a href="#Annotations">4.19. Annotations</a></li>
<li> <a href="#Order%20of%20ABC%20constructs">4.20. Order of ABC constructs</a></li>
</ul>
<li> <a href="#Lyrics">5. Lyrics</a></li>
<li> <a href="#Clefs">6. Clefs</a></li>
<li> <a href="#Multiple%20voices">7. Multiple voices</a></li>
<ul>
<li> <a href="#Voice%20properties">7.1. Voice properties</a></li>
<li> <a href="#Breaking%20lines">7.2. Breaking lines</a></li>
<li> <a href="#Inline%20fields">7.3. Inline fields</a></li>
<li> <a href="#Voice%20overlay">7.4. Voice overlay</a></li>
</ul>
<li> <a href="#ABC%20data%20format">8. ABC data format</a></li>
<ul>
<li> <a href="#Tune%20body">8.1. Tune body</a></li>
<li> <a href="#ABC%20string">8.2. ABC string</a></li>
</ul>
<li> <a href="#Macros">9. Macros</a></li>
<ul>
<li> <a href="#Static%20macros">9.1. Static macros</a></li>
<li> <a href="#Transposing%20macros">9.2. Transposing macros</a></li>
</ul>
<li> <a href="#Deprecated%20ABC%20syntax">10. Deprecated ABC syntax</a></li>
<ul>
<li> <a href="#Deprecated%20fields">10.1. Deprecated fields</a></li>
<li> <a href="#Deprecated%20decorations">10.2. Deprecated decorations</a></li>
<li> <a href="#Deprecated%20continuations">10.3. Deprecated continuations</a></li>
</ul>
<li> <a href="#ABC%20Stylesheet%20specification">11. ABC Stylesheet specification</a></li>
<ul>
<li> <a href="#Voice%20grouping">11.1. Voice grouping</a></li>
<li> <a href="#Instrumentation%20directives">11.2. Instrumentation directives</a></li>
<li> <a href="#Accidental%20directives">11.3. Accidental directives</a></li>
<li> <a href="#Formatting%20directives">11.4. Formatting directives</a></li>
<ul>
<li> <a href="#Page%20Format">11.4.1. Page Format</a></li>
<li> <a href="#Font%20Settings">11.4.2. Font Settings</a></li>
<li> <a href="#Spaces">11.4.3. Spaces</a></li>
<li> <a href="#Measures">11.4.4. Measures</a></li>
<li> <a href="#Text">11.4.5. Text</a></li>
<li> <a href="#Misc">11.4.6. Misc</a></li>
</ul>
<li> <a href="#Application%20specific%20directives">11.5. Application specific directives</a></li>
</ul>
<li> <a href="#Portability%20Issues">12. Portability Issues</a></li>
<li> <a href="#Sample%20ABC%20Tunes">13. Sample ABC Tunes</a></li>
<ul>
<li> <a href="#English.abc">13.1. English.abc</a></li>
<li> <a href="#Strspys.abc">13.2. Strspys.abc</a></li>
<li> <a href="#Reels.abc">13.3. Reels.abc</a></li>
<li> <a href="#Canzonetta.abc">13.4. Canzonetta.abc</a></li>
</ul>
<li> <a href="#Appendix">14. Appendix</a></li>
<ul>
<li> <a href="#General%20MIDI%20Instruments">14.1. General MIDI Instruments</a></li>
<li> <a href="#Full%20table%20of%20accented%20letters">14.2. Full table of accented letters</a>

</li>
</ul>
</ul>
<hr>
<!--  AFT definitions -->
<p class="Body">
<em>In the following, lines typeset in italics are comments.</em>
</p>
<p class="Body">
<em>This document contains now many png images to illustrate</em>
<em>the ABC constructs.</em>
</p>
<!-- Start SectLevel1 -->
<h2><a name="Introduction">1. Introduction</a></h2>
<p class="Body">
ABC is a music notation system designed to be comprehensible by
both people and computers. Music notated in ABC is written using
characters; on paper, or in computer files.
</p>
<!--  ''Please note that "_and_": It means that features that are not'' -->
<!--  ''implemented in ABC applications cannot be considered part of the'' -->
<!--  ''standard.'' -->
<p class="Body">
This document is a proposal for a new ABC standard. It assumes that most
of the features described in the latest ABC draft (1.7.6, 08/05/2000)
are accepted.
</p>
<p class="Body">
This description of ABC has been created for those who wish to
understand the notation, and for implementers of new ABC applications.
It mentions some example tunes that are included at the bottom of this
document.
</p>
<p class="Body">
The ABC standard itself deals only with structured, high-level
information; how this information should be actually rendered by e.g. a
typesetter or a player program, is dealt with in a separate standard,
i.e. the <a href="#ABC%20Stylesheet%20specification">ABC Stylesheet specification</a>, included at the bottom of this
document.
</p>
<p class="Body">
This document is best read in conjunction with an introduction to the ABC
notation. Several are available:
</p>
<ul>
<li> <a href="http://abcplus.sourceforge.net/#ABCGuide">http://abcplus.sourceforge.net/#ABCGuide</a></li>
<li> <a href="http://www.lesession.co.uk/abc/abc_notation.htm">http://www.lesession.co.uk/abc/abc_notation.htm</a></li>
<li> <a href="http://trillian.mit.edu/%7Ejc/music/abc/doc/ABCtutorial.html">http://trillian.mit.edu/~jc/music/abc/doc/ABCtutorial.html</a></li>
</ul>
<p class="Body">
Since the ABC notation system was originally written, a large number of
ABC packages (programs which produce printed sheet music or allow for
computer performances, search in tune databases, or that analyze
tunes in some way) have been developed and/or extended in their
functionality. However, not all of them follow this standard absolutely.
This document aims at solving, or at least reducing, the problem of
incompatibility between applications.
</p>
<p class="Body">
Still, when using ABC it is good to be aware of the existence of such
extensions. The extensions that were implemented by the major ABC packages
have been described here:
</p>
<!--  IO: These references are especially useful for developers -->
<!--  of new ABC software. -->
<ul>
<li> <a href="http://abc.sourceforge.net/standard/abc2midi.txt">http://abc.sourceforge.net/standard/abc2midi.txt</a></li>
<li> <a href="http://www.barfly.dial.pipex.com/bfextensions.html">http://www.barfly.dial.pipex.com/bfextensions.html</a></li>
<li> <a href="http://abc.sourceforge.net/standard/abcm2ps.txt">http://abc.sourceforge.net/standard/abcm2ps.txt</a></li>
<li> <a href="http://www.lautengesellschaft.de/cdmm/userguide/userguide.html">http://www.lautengesellschaft.de/cdmm/userguide/userguide.html</a></li>
</ul>
<p class="Body">
Henrik Norbeck kindly provided a BNF specification of this standard.
It is available here:
</p>
<ul>
<li> <a href="http://www.norbeck.nu/abc/bnf/abc20bnf.htm">http://www.norbeck.nu/abc/bnf/abc20bnf.htm</a></li>
</ul>
<p class="Body">
<em>Of course, the BNF will only fully conform to this standard</em>
<em>after it has been finalized.</em>
</p>
<p class="Body">
Questions about this standard or ABC in general can be addressed to the
abcusers e-mail list:
</p>
<dl>
<dt><strong>Subscriptions</strong></dt><dd> <a href="http://groups.yahoo.com/group/abcusers/">http://groups.yahoo.com/group/abcusers/</a></dd>
<dt><strong>Archive</strong></dt><dd> <a href="http://groups.yahoo.com/group/abcusers/">http://groups.yahoo.com/group/abcusers/</a>
<br><a href="http://www.mail-archive.com/abcusers%40argyll.wisemagic.com">http://www.mail-archive.com/abcusers%40argyll.wisemagic.com</a> 
(old posts)</dd>
</dl>
<p class="Body">
This standard is based on the latest ABC draft by Chris Walshaw and John
Atchley. The first revision of this draft was kindly prepared by Guido
Gonzato. The current document contains parts of texts written by
Jean-François Moine, Phil Taylor and James Allwright. It contains
contributions by John Chambers, Jack Campin, Arent Storm and Jaysen
Ollerenshaw.
</p>
<!--  IO: I corrected a typo in Phil's name. -->
<!--  (Phil Taylor: Many years later, along came John Atchley, a developer -->
<!--  with a burning desire to fix the abc standard.  He put together the -->
<!--  draft 1.7 standard and persuaded Chris Walshaw to put it on the abc -->
<!--  home page.) -->
<p class="Body">
The latest version of this document can be found here:
</p>
<ul>
<li> <a href="http://abc.sourceforge.net/standard/abc2-draft.html">http://abc.sourceforge.net/standard/abc2-draft.html</a></li>
<li> <a href="http://abc.sourceforge.net/standard/abc2-draft.aft">http://abc.sourceforge.net/standard/abc2-draft.aft</a></li>
</ul>
<center><em>Irwin Oppenheim</em></center>
<p class="Body">
<em>Comments and constructive criticism are very welcome.</em>
</p>
<!-- ''"Stuff such as bagpipe notation, modal key signatures, microtonal'' -->
<!-- ''accidentals, tablature support could go in separate modules that are'' -->
<!-- ''optional". -- I. Oppenheim'' -->
<hr>
<!--End Section 1-->
<h2><a name="File structure">2. File structure</a></h2>
<p class="Body">
An ABC file consists of one or more tune transcriptions. The tunes are
separated from each other by blank lines. An ABC file with more than
one tune in it, is called an ABC tunebook.
</p>
<p class="Body">
The tune itself consists of a <em>header</em> and a <em>body</em>. The header is
composed of several <em>field</em> lines, which are further discussed in the
section <a href="#Information%20fields">Information fields</a>. The header should start with an <tt>X</tt>
(reference number) field followed by a <tt>T</tt> (title) field and finish with
a <tt>K</tt> (key) field. The body of the tune, which contains the actual music
in ABC notation, should follow immediately after. As will be explained,
certain fields may also be used inside this tune body. If the file
contains only one tune the <tt>X</tt> field may be dropped. It is legal to
write a tune without a body. This feature can be used to document tunes
without transcribing them.
</p>
<p class="Body">
The file may optionally start with a file header, which is a block of
consecutive field lines, finished by a blank line. The file header may
be used to set default values for the tunes in the file. Such a file
header may only appear at the beginning of a file, not between tunes. Of
course, tunes may override the file header settings. However, when the
end of a tune is reached, the defaults set by the file header are
restored. Applications which extract separate tunes from a file, must
insert the fields of the original file header, into the header of the
extracted tune. However, since users may manually extract tunes, without
taking care of the file header, it is advisable not to use file headers
in tunebooks that are to be distributed.
</p>
<p class="Body">
It is legal to write free text before or between the tunes of a
tunebook. The free text should be separated from the surrounding tunes
by blank lines. Programs that are able to print tunebooks, may print the
free text sections. The free text is treated as an <a href="#ABC%20string">ABC string</a>. The
free text may be interspersed with directives (see section
<a href="#ABC%20Stylesheet%20specification">ABC Stylesheet specification</a>) or with <a href="#Extended%20information%20fields">Extended information fields</a>;
however, the scope of these settings is limited to the text that appears
up to the beginning of the next tune. At that point, the defaults set by
the file header are restored.
</p>
<!-- Start SectLevel2 -->
<h3><a name="Remarks">2.1. Remarks</a></h3>
<p class="Body">
A '<tt>%</tt>' symbol will cause the remainder of any input line to be ignored.
It can be used to add remarks to the end of an ABC line.
</p>
<p class="Body">
Alternatively, you can use the syntax <tt>[r: remarks]</tt> to write remarks
in the middle of a line of music.
</p>
<!--End Section 2-->
<h3><a name="Continuation of input lines">2.2. Continuation of input lines</a></h3>
<p class="Body">
If the last character on a line is a backslash (\), the next line should
be appended to the current one, deleting the backslash and the newline,
to make one long logical line. There may appear spaces or an end-of-line
remark after the backslash: these will be deleted as well. If the user
would like to have a space between the two half lines, he should either
type one before the backslash, or at the beginning of the next half
line.
</p>
<p class="Body">
Example:
</p><pre>gf|e2dc B2A2|B2G2 E2D2|.G2.G2 \  % continuation
GABc|d4 B2
w: Sa-ys my au-l' wan to your aul' wan\
   Will~ye come to the Wa-x-ies dar-gle?
</pre>
<p></p>
<p class="Body">
There is no limit to the number of lines that may be appended together.
</p>
<!--End Section 2-->
<h3><a name="Line breaking">2.3. Line breaking</a></h3>
<p class="Body">
Traditionally, one line of ABC notation corresponded closely to one line
of printed music.
</p>
<p class="Body">
It is desirable, however, that ABC applications provide the user with an
option to automatically reformat the line breaking, so that the layout
of the printed sheet music will look optimal.
</p>
<p class="Body">
To force a line break at all times, an exclamation mark (<tt>!</tt>) can be
used. The <tt>!</tt> can be inserted everywhere, where a note group could.
</p>
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="Information fields">3. Information fields</a></h2>
<p class="Body">
The information fields are used to notate things such as composer,
meter, etc, in fact anything that isn't music.
</p>
<!--  IO: I revised the following paragraph as sugg by Phil T. -->
<p class="Body">
Any line beginning with a letter in the range <tt>A-Z</tt> or <tt>a-z</tt> and
immediately followed by a colon is to be interpreted as a field. Many of
these field identifiers are currently unused, so programs that comply
with this standard should ignore the occurrence of information fields
not defined here. This will make it possible to extend the number of
information fields in the future. Some fields are permitted only in the
file or tune header and some only in the body, while others are allowed
in both locations. Field identifiers <tt>A-G</tt> and <tt>a-g</tt> will not be
permitted in the body to avoid confusion with note symbols.
</p>
<!--  IO: The next (revised) section has been taken out of the introduction. -->
<p class="Body">
Note that if you are intending to use the notation solely for
transcribing (rather than documenting) tunes, you can ignore most of of
the information fields as all you really need are the <tt>X</tt> (reference
number), <tt>T</tt> (title), <tt>M</tt> (meter), <tt>L</tt> (unit note length) and <tt>K</tt> (key)
fields. If applicable you could add a <tt>C</tt> (composer), an <tt>A</tt> (author of
lyrics) and a <tt>w</tt> (words) field. I have included a full list of fields
however, for those who wish to understand tunes transcribed by other
users.
</p>
<p class="Body">
By far the best way to find out how to use the fields is to look at the
example files in section <a href="#Sample%20ABC%20Tunes">Sample ABC Tunes</a> (in particular
<a href="#English.abc">English.abc</a>) and try out some examples. Thus rather than describing
them in detail, they are summarised in the following table.
</p>
<p class="Body">
The table illustrates how the fields may be used in the tune header and
whether they may also be used in the tune body (see section
<a href="#Use%20of%20fields%20within%20body">Use of fields within body</a> for details) or in the file header (see section
<a href="#File%20structure">File structure</a>).
</p>
<!-- 6 columns --><table border="">
<caption>ABC Fields and their usage</caption>
<tbody><tr><th><strong>Field name</strong></th><th><strong>header</strong></th><th><strong>body</strong></th><th><strong>file</strong></th><th><strong>type</strong></th><th><strong>Examples and notes</strong></th></tr>
<tr><td>A:author of lyrics  </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>A:Walter Raleigh&nbsp;&nbsp; </td></tr>
<tr><td>B:book&nbsp;&nbsp;      </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>B:O'Neills&nbsp;&nbsp;</td></tr>
<tr><td>C:composer&nbsp;&nbsp;  </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>C:Robert Jones, C:Trad.  </td></tr>
<tr><td>D:discography       </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>D:Chieftains IV&nbsp;&nbsp;  </td></tr>
<tr><td>F:file url&nbsp;&nbsp;  </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>F:http://a.b.c/file.abc  </td></tr>
<tr><td>G:group&nbsp;&nbsp;     </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>G:flute&nbsp;&nbsp;&nbsp;&nbsp;  </td></tr>
<tr><td>H:history&nbsp;&nbsp;   </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>H:This tune said to...   </td></tr>
<tr><td>I:instruction       </td><td>yes   </td><td>yes </td><td>yes  </td><td>I </td><td>I:score <a href="#%28SA%29%20%28TB%29">(SA) (TB)</a>      </td></tr>
<tr><td>K:key&nbsp;&nbsp;</td><td>last  </td><td>yes </td><td>&nbsp; </td><td>I </td><td>K:G, K:Dm, K:AMix&nbsp;&nbsp;</td></tr>
<tr><td>L:unit note length  </td><td>yes   </td><td>yes </td><td>&nbsp; </td><td>I </td><td>L:1/4, L:1/8&nbsp;&nbsp;     </td></tr>
<tr><td>M:meter&nbsp;&nbsp;     </td><td>yes   </td><td>yes </td><td>yes  </td><td>I </td><td>M:3/4, M:4/4&nbsp;&nbsp;     </td></tr>
<tr><td>m:macro&nbsp;&nbsp;     </td><td>yes   </td><td>yes </td><td>yes  </td><td>I </td><td>m: ~n2 = (3o/n/m/ n      </td></tr>
<tr><td>N:notes (annotation)</td><td>yes   </td><td>yes </td><td>yes  </td><td>S </td><td>N:see also O'Neills - 234</td></tr>
<tr><td>O:origin&nbsp;&nbsp;    </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>O:UK, Yorkshire, Bradford</td></tr>
<tr><td>P:parts&nbsp;&nbsp;     </td><td>yes   </td><td>yes </td><td>&nbsp; </td><td>I </td><td>P:A, P:ABAC, P:(A2B)3    </td></tr>
<tr><td>Q:tempo&nbsp;&nbsp;     </td><td>yes   </td><td>yes </td><td>&nbsp; </td><td>I </td><td>Q:"allegro" 1/4=120      </td></tr>
<tr><td>R:rhythm&nbsp;&nbsp;    </td><td>yes   </td><td>yes </td><td>yes  </td><td>S </td><td>R:R, R:reel&nbsp;&nbsp;      </td></tr>
<tr><td>r:remark&nbsp;&nbsp;    </td><td>yes   </td><td>yes </td><td>yes  </td><td>- </td><td>r:I love ABC&nbsp;&nbsp;     </td></tr>
<tr><td>S:source&nbsp;&nbsp;    </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>S:collected in Brittany  </td></tr>
<tr><td>s:symbol line       </td><td>&nbsp;  </td><td>yes </td><td>&nbsp; </td><td>I </td><td>s: +pp+ ** +f+&nbsp;&nbsp;   </td></tr>
<tr><td>T:title&nbsp;&nbsp;     </td><td>second</td><td>yes </td><td>yes  </td><td>S </td><td>T:Paddy O'Rafferty       </td></tr>
<tr><td>U:user defined      </td><td>yes   </td><td>yes </td><td>yes  </td><td>I </td><td>U: T = +trill+&nbsp;&nbsp;   </td></tr>
<tr><td>V:voice&nbsp;&nbsp;     </td><td>yes   </td><td>yes </td><td>&nbsp; </td><td>I </td><td>V:4 clef=bass&nbsp;&nbsp;    </td></tr>
<tr><td>W:words&nbsp;&nbsp;     </td><td>yes   </td><td>yes </td><td>&nbsp; </td><td>S </td><td>lyrics after tune&nbsp;&nbsp;</td></tr>
<tr><td>w:words&nbsp;&nbsp;     </td><td>&nbsp;  </td><td>yes </td><td>&nbsp; </td><td>S </td><td>lyrics aligned with tune </td></tr>
<tr><td>X:reference number  </td><td>first </td><td>&nbsp;</td><td>&nbsp; </td><td>I </td><td>X:1, X:2&nbsp;&nbsp;&nbsp;&nbsp; </td></tr>
<tr><td>Z:transcriber       </td><td>yes   </td><td>&nbsp;</td><td>yes  </td><td>S </td><td>Z:John Smith, j.s@aol.com</td></tr>
</tbody></table>
<p class="Body">
Fields of type <tt>S</tt> accept free text in the form of an <a href="#ABC%20string">ABC string</a> as
argument. Fields of type <tt>I</tt> expect a special instruction syntax which
will be detailed below. The contents of the remark field will be totally
ignored.
</p>
<!-- 	!I:information       !yes   !&nbsp;!yes  !I:speed 120	      ! -->
<!--  IO: The I: field was introduced by playabc to add -->
<!--  package dependent directives. This is now done -->
<!--  with the %% notation. I suggest to drop this field from -->
<!--  the standard, as was previously done with the E: field. -->
<!--  I removed all further occurrences of this field. -->
<!-- 	!u:user defined      !yes   !yes !yes  !u: T = ~		 ! -->
<!--     (the U: defines how the symbols are printed and the |u:| defines how -->
<!--     they are played). -->
<!--  IO: I adopted Jack Campin's proposal to change the meaning -->
<!--  of the A: field from "Area" to "Lyrics Author." As JC wrote: -->
<!--  "the 'area' idea just doesn't work---you can't fit the geographic -->
<!--  description of a tune into a  one-liner." At the same time, the -->
<!--  lack of a standardized way to mention a lyricist's name was a -->
<!--  serious omission from the standard; users who want to -->
<!--  indicate area information, can use the O: field just as well. -->
<!--  IO: As was suggested by Jack Campin, I slightly changed the -->
<!--  meaning of the Z: field from "transcription note" to -->
<!--  "transcriber." General transcription notes can be placed in -->
<!--  the N: field. -->
<!--  IO: corrected the example for the T: field. -->
<!--  IO: The next table was orig. in a separate section -->
<p class="Body">
The following table indicates whether the field contents
should be appended or replaced, if a certain field occurs
multiple times in the same tune. Some fields have a
special rule.
</p>
<pre>A:   append                    Q:   replace
B:   append                    R:   append (if in header)
C:   append                    R:   replace (in body)
D:   append                    S:   append
F:   replace                   s:   append
G:   append                    T:   append  (if in header)
H:   append                    T:   begin new section (in body)
K:   replace                   U:   replace
L:   replace                   V:ID replace (if in header)
M:   replace                   V:ID switch to indicated voice (in body)
m:   replace                   W:   append
N:   append                    w:   append
O:   append                    X:   only once per tune
P:   replace (if in header)    Z:   append
P:ID only once (in body)
</pre>
<!-- Start SectLevel2 -->
<h3><a name="Description">3.1. Description</a></h3>
<!-- Start SectLevel3 -->
<h4><a name="X: - reference number">3.1.1. X: - reference number</a></h4>
<p class="Body">
The <tt>X</tt> field is used to assign to each tune within a tunebook an unique
reference number (which should be a positive integer), for example:
<tt>X:23</tt>. All tune headers should start with a <tt>X</tt> field, which may be
omitted solely if there is only one tune in the file. In that case, the
tune is implicitly assigned the number one. There may be only one <tt>X</tt>
field per tune.
</p>
<!--End Section 3-->
<h4><a name="T: - tune title">3.1.2. T: - tune title</a></h4>
<p class="Body">
Some tunes have more than one title and so this field can be used more
than once per tune - the first time will generate the title whilst
subsequent usage will generate the alternatives in small print.  The <tt>T:</tt>
field can also be used within a tune to name parts of a tune - in this
case it should come before any key or meter changes.
</p>
<p class="Body">
By default, the title(s) will be printed centered above the tune, each
title on a separate line. Note that is only indicative, users may change
the formatting by providing stylesheet directives or setting options in
the software they use.
</p>
<p class="Body">
The <tt>T</tt> field may be empty, in which case nothing is printed.
</p>
<!--End Section 3-->
<h4><a name="C: - composer">3.1.3. C: - composer</a></h4>
<p class="Body">
By default, the composer(s) will be printed right aligned, just below
the title, each composer on a separate line.
</p>
<!--  IO: added O: description, -->
<!--  in the form suggested by Jack Campin -->
<!--End Section 3-->
<h4><a name="O: - origin">3.1.4. O: - origin</a></h4>
<p class="Body">
The geographical origin(s) of a tune. 
</p>
<p class="Body">
If possible, enter the data in a hierarchical way, like:
</p>
<pre>O:Canada, Nova Scotia, Halifax.
O:England, Yorkshire, Bradford and Bingley.
</pre>
<p class="Body">
Always use <tt>,</tt> as separator, so that software may parse the field.
</p>
<p class="Body">
This field may especially be used for "traditional" tunes,
with no known composer.
</p>
<p class="Body">
By default, the contents of the <tt>O</tt> field will be appended
to the <tt>C</tt> field, surrounded by parentheses. 
</p>
<!--End Section 3-->
<h4><a name="A: - author of lyrics">3.1.5. A: - author of lyrics</a></h4>
<p class="Body">
By default, the lyricist(s) will be printed left aligned, just below
the title, each lyricist on a separate line.
</p>
<!--End Section 3-->
<h4><a name="M: - meter">3.1.6. M: - meter</a></h4>
<p class="Body">
Apart from the normal meters, e.g. <tt>M:6/8</tt> or <tt>M:4/4</tt>, the symbols <tt>M:C</tt>
and <tt>M:C|</tt> give common time (4/4) and cut time (2/2) respectively. The
symbol <tt>M:none</tt> omits the meter entirely (free meter).
</p>
<p class="Body">
It is also possible to specify a complex meter, e.g. <tt>M:(2+3+2)/8</tt>,
to make explicit which beats should be accented. The parentheses
around the numerator are optional.
</p>
<p class="Body">
The example given will be typeset as:
</p><pre>2 + 3 + 2
    8
</pre>
<p></p>
<p class="Body">
When there is no <tt>M:</tt> field defined, free meter is assumed.
</p>
<p class="Body">
Note that in free meter, bar lines can be placed anywhere you want.
</p>
<!--End Section 3-->
<h4><a name="L: - unit note length">3.1.7. L: - unit note length</a></h4>
<p class="Body">
Specifies the unit note length, i.e. <tt>L:1/4</tt> - quarter note, <tt>L:1/8</tt>
- eighth note, <tt>L:1/16</tt> - sixteenth, <tt>L:1/32</tt> - thirty-second. 
</p>
<!--  IO: The following paragraph appeared originally in the -->
<!--  section on note lengths. -->
<p class="Body">
If there is no <tt>L:</tt> field defined, a unit note length is set by
default, based on the meter field <tt>M:</tt>. This default is calculated by
computing the meter as a decimal: if it is less than 0.75 the default
unit note length is a sixteenth note; if it is 0.75 or greater, it is an
eighth note. For example, 2/4 = 0.5, so, the default unit note length is
a sixteenth note, while for 4/4 = 1.0, or 6/8 = 0.75, or 3/4= 0.75, it
is an eighth note. For <tt>M:C</tt> (4/4), <tt>M:C|</tt> (2/2) and <tt>M:none</tt> (free
meter), the default unit note length is 1/8.
</p>
<!--  IO: The following paragraph appeared originally in the -->
<!--  section on inline fields. -->
<p class="Body">
A meter change within the body of the tune will not change the unit note
length (unlike one in the header if no <tt>L:</tt> field is present).
</p>
<!--End Section 3-->
<h4><a name="Q: - tempo">3.1.8. Q: - tempo</a></h4>
<p class="Body">
Defines the tempo in terms of a number of beats per minute, e.g.
<tt>Q:1/2=120</tt> means 120 half-note beats per minute.
</p>
<!--  IO: From abcm2ps documentation -->
<p class="Body">
There may be up to 4 beats in the definition, e.g:
</p><pre>Q:1/4 3/8 1/4 3/8=40
</pre>
<p></p>
<p class="Body">
This means: play the tune as if <tt>Q:5/4=40</tt> was written, but print the
tempo indication using separate notes as specified by the user.
</p>
<p class="Body">
The tempo definition may be preceded or followed by an optional
<a href="#ABC%20string">ABC string</a>, enclosed by quotes, e.g.
</p><pre>Q: "Allegro" 1/4=120
Q: 3/8=50 "Slowly"
</pre>
<p></p>
<p class="Body">
It is OK to give a string without an explicit tempo indication, e.g.
<tt>Q:"Andante"</tt>.
</p>
<!--  Added by Phil Taylor -->
<p class="Body">
Older versions of this standard permitted two further formats:
</p><pre>Q: C=120
</pre>
This is no longer part of the standard and should not be used.
<p></p>
<p class="Body">
and:
</p><pre>Q:120
</pre>
<p></p>
<p class="Body">
Meaning: play 120 unit note-lengths per minute. This is not very
musical, and its use is to be discouraged, however there are many abc
files which employ this format and programs should be prepared to accept
it.
</p>
<!--End Section 3-->
<h4><a name="P: - parts">3.1.9. P: - parts</a></h4>
<p class="Body">
 
Can be used in the header to state the order in which the tune parts are
played, i.e. <tt>P:ABABCDCD</tt>, and then inside the tune to mark each part,
i.e. <tt>P:A</tt> or <tt>P:B</tt>.
</p>
<p class="Body">
Within the header, a part can be repeated by following it with a number:
e.g. <tt>P:A3</tt> is equivalent to <tt>P:AAA</tt>. A sequence can be repeated by
using parentheses: e.g. <tt>P:(AB)3</tt> is equivalent to <tt>P:ABABAB</tt>. Nested
parentheses are permitted; dots may be placed anywhere within the
header <tt>P:</tt> field to increase legibility: e.g. <tt>P:((AB)3.(CD)3)2</tt>. These
dots are ignored by computer programs.
</p>
<p class="Body">
Please see section <a href="#Variant%20Endings">Variant Endings</a> and section <a href="#Lyrics">Lyrics</a> for
possible uses of part notation.
</p>
<!--End Section 3-->
<h4><a name="Z: transcriber">3.1.10. Z: transcriber</a></h4>
<p class="Body">
The name(s) of the person(s) who transcribed the tune in ABC,
and possibly some contact information, like an (e-)mail address
or homepage url.
</p>
<p class="Body">
All <tt>Z</tt> fields that appear within the header are appended and by default
should be printed just below the tune.
</p>
<!--End Section 3-->
<h4><a name="N: - notes">3.1.11. N: - notes</a></h4>
<p class="Body">
Contains general annotations, such as references to other tunes
which are similar, details on how the original notation of the tune
was converted to ABC, etc.
</p>
<p class="Body">
All <tt>N</tt> fields that appear within the tune are appended and by default
should be printed left aligned below the name(s) of the transcriber(s).
</p>
<!--End Section 3-->
<h4><a name="G: - group">3.1.12. G: - group</a></h4>
<p class="Body">
Database software may use this field to group together tunes (for
example by instruments) for indexing purposes. Other software may safely
ignore this field.
</p>
<!--End Section 3-->
<h4><a name="H: - history">3.1.13. H: - history</a></h4>
<p class="Body">
Can be used for multi-line stories/anecdotes, all of which will be ignored
until the next field occurs.
</p>
<!--End Section 3-->
<h4><a name="K: - key">3.1.14. K: - key</a></h4>
<p class="Body">
The key signature should be specified with a capital letter (<tt>A-G</tt>)
which may be followed by a '<tt>#</tt>' or '<tt>b</tt>' for sharp or flat
respectively. In addition the mode should be specified. For example,
<tt>K:C major</tt>, <tt>K:A minor</tt>, <tt>K:C ionian</tt>, <tt>K:A aeolian</tt>, <tt>K:G mixolydian</tt>,
<tt>K:D dorian</tt>, <tt>K:E phrygian</tt>, <tt>K:F lydian</tt> and <tt>K:B locrian</tt> would all
produce a staff with no sharps or flats. The spaces can be left out,
capitalisation is ignored for the modes and in fact only the first three
letters of each mode are parsed so that, for example, <tt>K:F# mixolydian</tt>
is the same as <tt>K:F#Mix</tt> or even <tt>K:F#MIX</tt>. As a special case, <tt>minor</tt>
may be abbreviated to '<tt>m</tt>'. When no mode is indicated, <tt>major</tt> is
assumed.
</p>
<p class="Body">
This table sums up key signatures written in different ways:
</p>
<pre>Key Sig     Major   Minor    Mix     Dor     Phr     Lyd     Loc
            Ion     Aeo    

7 sharps:   C#      A#m      G#Mix   D#Dor   E#Phr   F#Lyd   B#Loc
6 sharps:   F#      D#m      C#Mix   G#Dor   A#Phr   BLyd    E#Loc
5 sharps:   B       G#m      F#Mix   C#Dor   D#Phr   ELyd    A#Loc
4 sharps:   E       C#m      BMix    F#Dor   G#Phr   ALyd    D#Loc
3 sharps:   A       F#m      EMix    BDor    C#Phr   DLyd    G#Loc
2 sharps:   D       Bm       AMix    EDor    F#Phr   GLyd    C#Loc
1 sharp :   G       Em       DMix    ADor    BPhr    CLyd    F#Loc
0 sharps:   C       Am       GMix    DDor    EPhr    FLyd    BLoc
1 flat  :   F       Dm       CMix    GDor    APhr    BbLyd   ELoc
2 flats :   Bb      Gm       FMix    CDor    DPhr    EbLyd   ALoc
3 flats :   Eb      Cm       BbMix   FDor    GPhr    AbLyd   DLoc
4 flats :   Ab      Fm       EbMix   BbDor   CPhr    DbLyd   GLoc
5 flats :   Db      Bbm      AbMix   EbDor   FPhr    GbLyd   CLoc
6 flats :   Gb      Ebm      DbMix   AbDor   BbPhr   CbLyd   FLoc
7 flats :   Cb      Abm      GbMix   DbDor   EbPhr   FbLyd   BbLoc
</pre>
<p class="Body">
By specifying <tt>K:none</tt>, it is possible to use no key signature at all.
</p>
<!--  IO: On the list it has rightfully been argued -->
<!--  that the added accidentals by default should -->
<!--  modify the key signature itself, "rather than -->
<!--  dotting them through the tune" (Phil Taylor). -->
<p class="Body">
The key signatures may be <strong>modified</strong> by adding <a href="#accidentals">accidentals</a>, according
to the format <tt>K:&lt;tonic&gt; &lt;mode&gt; &lt;accidentals&gt;</tt>. For example, <tt>K:D Phr ^f</tt>
would give a key signature with two flats and one sharp, which
designates a very common mode in e.g. Klezmer (Ahavoh Rabboh) and in
Arabic music (Maqam Hedjaz). Likewise, <tt>K:D maj =c</tt> or <tt>K:D =c</tt> will
give a key signature with f sharp and c natural. Note that there can be
several modifying accidentals, separated by spaces, each beginning with
an accidental sign ('<tt>__</tt>', '<tt>_</tt>', '<tt>=</tt>', '<tt>^</tt>' or '<tt>^^</tt>'), followed
by a letter in lower case. 
</p>
<p class="Body">
It is possible to use the format <tt>K:&lt;tonic&gt; exp &lt;accidentals&gt;</tt> to
explicitly define all the accidentals of a key signature. Thus <tt>K:D Phr ^f</tt>
could also be notated as <tt>K:D exp _b _e ^f</tt>, where 'exp' is an
abbreviation of 'explicit'. Again, the note names of the accidentals
should be in lower case.
</p>
<p class="Body">
<em>Software that does not support explicit key signatures, should mark</em>
<em>the individual notes in the tune with the accidentals that apply to</em>
<em>them.</em>
</p>
<!--  IO: copied from John Chambers -->
<p class="Body">
The Scottish highland pipes are highly diatonic,  and  have the scale
<tt>G A B ^c d e ^f g a</tt>. These are the only notes they play with any accuracy. 
The highland pipe music thus uses the modes D major and A mixolyian
primarily (and also B minor and E dorian).
</p>
<p class="Body">
Therefore there are two additional keys specifically for notating
highland bagpipe tunes; <tt>K:HP</tt> doesn't put a key signature on the music,
as is common with many tune books of this music, while <tt>K:Hp</tt> marks the
stave with F sharp, C sharp and G natural. Both force all the beams and
stems of normal notes to go downwards, and of grace notes to go upwards.
</p>
<p class="Body">
By default, the ABC tune will be typeset with a treble clef.  You can
add special clef specifiers to the <tt>K:</tt> field, with or without a key
signature, to change the clef and various other staff properties.
<tt>K: clef=bass</tt>, for example, would indicate the bass clef. See section
<a href="#Clefs">Clefs</a> for full details.
</p>
<p class="Body">
Note that the first occurence of the <tt>K</tt> field, which must appear in
every tune, finishes the tune header. All following lines are considered
to be part of the tune body.
</p>
<!--End Section 3-->
<h4><a name="Other fields">3.1.15. Other fields</a></h4>
<p class="Body">
For <tt>w:</tt> see the section <a href="#Lyrics">Lyrics</a>.
For <tt>s:</tt> see the section <a href="#Symbol%20lines">Symbol lines</a>
For <tt>U:</tt> see the section <a href="#Redefinable%20symbols">Redefinable symbols</a>.
For <tt>V:</tt> see the section <a href="#Multiple%20voices">Multiple voices</a>.
For <tt>r:</tt> see the section <a href="#remarks">remarks</a>.
For <tt>I:</tt> see the section <a href="#ABC%20Stylesheet%20specification">ABC Stylesheet specification</a>.
For <tt>m:</tt> see the section <a href="#macros">macros</a>.
</p>
<!--End Section 3-->
<!-- End SectLevel3 -->
<!--End Section 2-->
<h3><a name="Use of fields within body">3.2. Use of fields within body</a></h3>
<p class="Body">
It is often desired to change the key <tt>K</tt>, meter <tt>M</tt>, or unit note
length <tt>L</tt> mid-tune. These fields and any other fields which can be
legally used within the tune, can be specified as an inline field, by
placing them within square brackets in a line of music, e.g.
</p>
<pre>E2E EFE|E2E EFG|[M:9/8] A2G F2E D2|]
</pre>
<p class="Body">
The first bracket, field identifier and colon must be written without
intervening spaces. Only one field may be placed within a pair of
brackets, however, multiple, bracketed fields may be placed next to each
other. Where appropriate, inline fields (especially clef changes) can be
used in the middle of a beam without breaking it.
</p>
<p class="Body">
See section <a href="#Information%20fields">Information fields</a> for a list of fields that may appear
within the body.
</p>
<p class="Body">
For backward compatibility, it is still allowed to notate tune fields on
a line by themselves, between the music lines:
</p>
<pre>ed|cecA B2ed|cAcA E2ed|cecA B2ed|c2A2 A2:|
M:2/2
K:G
AB|cdec BcdB|ABAF GFE2|cdec BcdB|c2A2 A2:|
</pre>
<p class="Body">
However, the inline format is preferred.
</p>
<!--End Section 2-->
<h3><a name="Extended information fields">3.3. Extended information fields</a></h3>
<p class="Body">
The number of possible ABC information fields is somewhat limited.
Furthermore, the one character names of these fields are rather cryptic.
To cope with this, the ABC 2.0 standard introduces a new set of information
fields, conforming to a new syntax.
</p>
<p class="Body">
These new fields should appear on a line by themselves. They <em>start</em>
with the characters <tt>%%</tt>, possibly followed by spaces, after which
the name of the field follows, followed by a space and the contents
of the field.
</p>
<p class="Body">
The fields that are defined in this section, may either appear in the
file header, in the tune header or in the free text area between tunes,
but not in the tune body. Remember: applications which extract separate
tunes from a file, must insert the fields of the original file header,
into the header of the extracted tune. This is also true for the fields
defined in this section.
</p>
<!-- Start SectLevel3 -->
<h4><a name="Copyright field">3.3.1. Copyright field</a></h4>
<p class="Body">
Example:
</p>
<pre>%%abc-copyright (C) Copyright John Smith 2003
</pre>
<p class="Body">
There may appear multiple copyright fields in the file header and the
tune header, that all are appended.  The contents of the copyright
fields is treated as an <a href="#ABC%20string">ABC string</a>. Among other things this means that
"(C)" will be printed as the international copyright symbol.
</p>
<p class="Body">
The contents of the copyright field is finally appended to the
contents of the <tt>Z</tt> field, which by default is printed just below
the tune.
</p>
<!--End Section 3-->
<h4><a name="Version field">3.3.2. Version field</a></h4>
<p class="Body">
Example:
</p>
<pre>%%abc-version 2.0
</pre>
<p class="Body">
Software that exports ABC tunes conforming to this standard, should
include a version field.
</p>
<p class="Body">
Later occurrences of the version field, override earlier ones.
</p>
<!--End Section 3-->
<h4><a name="Creator field">3.3.3. Creator field</a></h4>
<p class="Body">
Example:
</p>
<pre>%%abc-creator xml2abc 2.7
</pre>
<p class="Body">
The creator field contains the name of the program that
created the ABC file, followed by the version number of the
program.
</p>
<p class="Body">
Software that exports ABC tunes conforming to this standard, should
include a creator field.
</p>
<p class="Body">
Later occurrences of the creator field, override earlier ones.
</p>
<!--End Section 3-->
<h4><a name="Charset field">3.3.4. Charset field</a></h4>
<p class="Body">
Example:
</p>
<pre>%%abc-charset iso-8859-1
</pre>
<p class="Body">
This field documents in which character set ABC strings are coded.
When no charset is specified, iso-8859-1 (a.k.a. Latin-1) is assumed.
This is convenient, since it is also the default charset used in
webpages.
</p>
<p class="Body">
Legal values for the charset field are:
</p><pre>iso-8859-1, iso-8859-2, iso-8859-3, iso-8859-4,
iso-8859-5, iso-8859-6, iso-8859-7, iso-8859-8,
iso-8859-9, iso-8859-10, us-ascii, utf-8.
</pre>
<p></p>
<p class="Body">
Software that exports ABC tunes conforming to this standard, should
include a charset field if an encoding other than iso-8859-1 is used.
</p>
<p class="Body">
Note that software that exports ABC, should convert all accented
characters that could be coded with non-numeric backscape sequences, to
the notation discussed in section <a href="#ABC%20string">ABC string</a>. This is to ensure
maximum portability. Programs that cannot display the accented letters,
can then simply reduce them to the base letter, as is discussed in that
section.
</p>
<p class="Body">
All ABC software must be able to handle ABC strings coded in iso-8859-1
and us-ascii. Support for the other charsets is optional. Extensive
information about these charsets, can be found here:
</p>
<ul>
<li> <a href="http://czyborra.com/charsets/iso8859.html">http://czyborra.com/charsets/iso8859.html</a></li>
</ul>
<p class="Body">
It is possible to use different charsets in one file: later occurrences
of the charset field, override earlier ones.
</p>
<!--End Section 3-->
<h4><a name="Include field">3.3.5. Include field</a></h4>
<p class="Body">
Example:
</p>
<pre>%%abc-include mydefs.abh
</pre>
<p class="Body">
Imports the definitions found in a separate ABC Header file (ABH), and
inserts them into the file header or tune header.
</p>
<p class="Body">
The file may contain both regular ABC field lines, extended information
field lines, stylesheet directives (see section
<a href="#ABC%20Stylesheet%20specification">ABC Stylesheet specification</a>) and remark lines, but no other
ABC constructs.
</p>
<!--End Section 3-->
<h4><a name="Edited-by field">3.3.6. Edited-by field</a></h4>
<p class="Body">
Example:
</p>
<pre>%%abc-edited-by John Smith, www.johnsmith.com
</pre>
<p class="Body">
Name and contact information of the person/organization who edited an
ABC tunebook, ABC Header file or ABC tune. This may or may not be the
same person who originally transcribed the individual tunes in ABC
notation.
</p>
<p class="Body">
Multiple occurrences of the field are appended. The contents of
the field is treated as an <a href="#ABC%20string">ABC string</a>.
</p>
<!--End Section 3-->
<!-- End SectLevel3 -->
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="The tune body">4. The tune body</a></h2>
<!-- Start SectLevel2 -->
<h3><a name="Pitch">4.1. Pitch</a></h3>
<p class="Body">
The following letters are used to represent notes using the treble clef:
</p>
<pre>
                                                      d'
                                                -c'- ----
                                             b
                                        -a- --- ---- ----
                                       g
 ------------------------------------f-------------------
                                   e
 --------------------------------d-----------------------
                               c
 ----------------------------B---------------------------
                           A
 ------------------------G-------------------------------
                       F
 --------------------E-----------------------------------
                   D
 ---- ---- ---- -C-
            B,
 ---- -A,-
  G,
</pre>
<p class="Body">
and by extension, the notes <tt>C,</tt> <tt>D,</tt> <tt>E,</tt> <tt>F,</tt> <tt>e'</tt> <tt>f'</tt> <tt>g'</tt> <tt>a'</tt> and
<tt>b'</tt> are available. Notes can be modified in length (see <a href="#Note%20lengths">Note lengths</a>).
Lower octaves are reached by using 2 commas, 3 commas and so on. Higher
octaves are written using 2 apostrophes, 3 apostrophes and so on.
</p>
<!--  IO: This addition was previously discussed on the list -->
<p class="Body">
Programs should be able to to parse any combinations of <tt>,</tt> and <tt>'</tt>
signs appearing after the note. For example <tt>C,',</tt> should have the the
same meaning as <tt>C,</tt>; while (uppercase) <tt>C'</tt> should have the same
meaning as (lowercase) <tt>c</tt>.
</p>
<p class="Body">
NB. The English note names <tt>C</tt>-<tt>B</tt>, which are used in the ABC system,
correspond to the note names <tt>do</tt>-<tt>si</tt>, which are used in many other
languages: <tt>do</tt>=<tt>C</tt>, <tt>re</tt>=<tt>D</tt>, <tt>mi</tt>=<tt>E</tt>, <tt>fa</tt>=<tt>F</tt>, <tt>sol</tt>=<tt>G</tt>, <tt>la</tt>=<tt>A</tt>,
<tt>si</tt>=<tt>B</tt>.
</p>
<!--End Section 2-->
<h3><a name="Accidentals">4.2. Accidentals</a></h3>
<p class="Body">
The symbols '<tt>^</tt>', '<tt>=</tt>' and '<tt>_</tt>' are used (before a note) to notate
respectively a sharp, natural or flat. Double sharps and flats are
available with '<tt>^^</tt>' and '<tt>__</tt>' respectively.
</p>
<!--End Section 2-->
<h3><a name="Note lengths">4.3. Note lengths</a></h3>
<p class="Body">
<em>Throughout this document note lengths are referred as sixteenth,</em>
<em>eighth, etc. The equivalents common in the U.K. are sixteenth note =</em>
<em>semi-quaver, eighth = quaver, quarter = crotchet and half = minim.</em>
</p>
<p class="Body">
The unit note length for the transcription is set in the <tt>L:</tt> field, e.g.
<tt>L:1/8</tt> sets an eighth note as the unit note length. A single letter in
the range <tt>A-G</tt>, <tt>a-g</tt> represents a note of this length. For example, if
the unit note length is an eighth note, <tt>DEF</tt> represents 3 eighth notes.
</p>
<p class="Body">
Notes of differing lengths can be obtained by simply putting a multiplier
after the letter. Thus if the unit note length is 1/16, <tt>A</tt> or <tt>A1</tt> is a
sixteenth note, <tt>A2</tt> an eighth note, <tt>A3</tt> a dotted eighth note, <tt>A4</tt> a
quarter note, <tt>A6</tt> a dotted quarter note, <tt>A7</tt> a double dotted quarter
note, <tt>A8</tt> a half note, <tt>A12</tt> a dotted half note, <tt>A14</tt> a double dotted
half note, <tt>A15</tt> a triple dotted half note and so on. If the unit note
length is <tt>1/8</tt>, <tt>A</tt> is an eighth note, <tt>A2</tt> a quarter note, <tt>A3</tt> a dotted
quarter note, <tt>A4</tt> a half note, and so on.
</p>
<p class="Body">
To get shorter notes, either divide them - e.g. if <tt>A</tt> is an eighth
note, <tt>A/2</tt> is a sixteenth note, <tt>A3/2</tt> is a dotted eighth note, <tt>A/4</tt>
is a thirty-second note - or change the unit note length with the <tt>L:</tt>
field. Alternatively, if the music has a broken rhythm, e.g. dotted
eighth note/sixteenth note pairs, use <a href="#broken%20rhythm">broken rhythm</a> markers. Note that
<tt>A/</tt> is shorthand for <tt>A/2</tt> and similarly <tt>A//</tt> = <tt>A/4</tt>, etc.
</p>
<p class="Body">
<em>Note lengths that can't be translated to conventional staff  notation</em>
<em>are legal, but should be avoided.</em>
</p>
<!--End Section 2-->
<h3><a name="Broken rhythm">4.4. Broken rhythm</a></h3>
<p class="Body">
A common occurrence in traditional music is the use of a dotted or broken
rhythm. For example, hornpipes, strathspeys and certain morris jigs all
have dotted eighth notes followed by sixteenth notes as well as vice-versa
in the case of strathspeys. To support this, ABC notation uses a '<tt>&gt;</tt>' to
mean 'the previous note is dotted, the next note halved' and '<tt>&lt;</tt>' to mean
'the previous note is halved, the next dotted'. Thus the following lines
all mean the same thing (the third version is recommended):
</p>
<pre>L:1/16
a3b cd3 a2b2c2d2

L:1/8
a3/2b/2 c/2d3/2 abcd

L:1/8
a&gt;b c&lt;d abcd
</pre>
<img src="abc2-draft_files/broken-80.png" alt="" align="bottom">
<p class="Body">
As a logical extension, <tt>&gt;&gt;</tt> means that the first  note  is  double
dotted and the second quartered and <tt>&gt;&gt;&gt;</tt> means that the first note
is triple dotted and the length of the second divided  by  eight.
Similarly for <tt>&lt;&lt;</tt> and <tt>&lt;&lt;&lt;</tt>.
</p>
<!--  IO: suggested by Phil Taylor -->
<p class="Body">
Note that the use of broken rhythm markers between notes of unequal
lengths will produce undefined results, and should be avoided.
</p>
<!--End Section 2-->
<h3><a name="Rests">4.5. Rests</a></h3>
<p class="Body">
Rests can be transcribed with a '<tt>z</tt>' or a '<tt>x</tt>' and can be modified in
length in exactly the same way as audible notes can. <tt>z</tt> rests are
printed in the resulting sheet music, while <tt>x</tt> rests are invisible,
that is not notated in the printed music.
</p>
<p class="Body">
Multi-measure rests are notated using '<tt>Z</tt>' (upper case) followed by the
number of measures, e.g.
</p>
<pre>Z4|CD EF|GA Bc
</pre>
<img src="abc2-draft_files/rests1-80.png" alt="" align="bottom">
<p class="Body">
is equivalent to
</p>
<pre>z4|z4|z4|z4|CD EF|GA Bc
</pre>
<img src="abc2-draft_files/rests2-80.png" alt="" align="bottom">
<p class="Body">
When no number of measures is given, <tt>Z</tt> is equivalent to a pause of one
measure:
</p>
<img src="abc2-draft_files/pause-80.png" alt="" align="bottom">
<!--End Section 2-->
<h3><a name="Spacer">4.6. Spacer</a></h3>
<p class="Body">
'<tt>y</tt>' can be used to add some more space between the surrounding notes;
moreover, <a href="#chord%20symbols">chord symbols</a> and <a href="#decorations">decorations</a> can be attached
to it, to make them appear between notes. Example:
</p><pre>"Am" +pp+ y
</pre>
<p></p>
<p class="Body">
Note that <tt>y</tt> does <em>not</em> create a rest in the music.
</p>
<!--End Section 2-->
<h3><a name="Beams">4.7. Beams</a></h3>
<p class="Body">
To group notes together under one beam they should be grouped together
without spaces. Thus in 2/4, <tt>A2BC</tt> will produce an eighth note followed by
two sixteenth notes under one beam whilst <tt>A2 B C</tt> will produce the same
notes separated. The beam slopes and the choice of upper or lower staffs
are generated automatically.
</p>
<!--  John Norvell: -->
<p class="Body">
Notes that cannot be beamed, should be treated as if they were always
surrounded by space, e.g. if <tt>L:1/8</tt> then <tt>ABC2DE</tt> is equivalent with
<tt>AB C2 DE</tt>.
</p>
<!--  IO: Added on request by Jack Campin -->
<p class="Body">
Back quotes <tt>`</tt> may be used freely between beamed notes to increase
legibility. They are ignored by computer programs. Thus <tt>A2``B``C</tt>
is interpreted the same way as <tt>A2BC</tt> is.
</p>
<!--End Section 2-->
<h3><a name="Repeat/bar symbols">4.8. Repeat/bar symbols</a></h3>
<p class="Body">
Bar line symbols are notated as follows:
</p>
<dl>
<dt><strong>|</strong></dt><dd> bar line</dd>
<dt><strong>|]</strong></dt><dd> thin-thick double bar line</dd>
<dt><strong>||</strong></dt><dd> thin-thin double bar line</dd>
<dt><strong>[|</strong></dt><dd> thick-thin double bar line</dd>
<dt><strong>|:</strong></dt><dd> start of repeated section</dd>
<dt><strong>:|</strong></dt><dd> end of repeated section</dd>
<dt><strong>::</strong></dt><dd> start &amp; end of two repeated sections</dd>
</dl>
<p class="Body">
If an 'end of repeated section' is found without a previous 'start of
repeated section', the music restarts from the beginning of the tune,
or from the latest double bar line or end of repeated section.
</p>
<!--  IO: ":|:" is used by abc2win -->
<p class="Body">
Note that the notation <tt>::</tt> is short for <tt>:|</tt> followed by |<tt>:</tt>.
The variants <tt>::</tt>, <tt>:|:</tt> and <tt>:||:</tt> are all equivalent.
</p>
<!--  IO: As suggested by John Chambers -->
<p class="Body">
By extension, |:: and ::| mean the start and end of a section that is
to be  repeated three times, and so on.
</p>
<!--  Added by IO -->
<p class="Body">
A dotted bar line can be notated by preceding it with a dot, e.g. '.|'. This
may be useful for notating editorial bar lines in music with very long
measures. An invisible bar line may be notated by putting the bar line in
brackets, e.g. '[|]'. This may be useful for e.g. notating <a href="#Voice%20overlay">Voice overlay</a>
in meter free music.
</p>
<!--  IO: based on abcm2ps doc -->
<p class="Body">
ABC parsers should be quite liberal in recognizing bar lines. In the wild,
bar lines may have any shape, using a sequence of '|' (thin bar line), '['
or ']' (thick bar line), and ':' (dots). Ex: '|[|', '[|:::'.
</p>
<!--End Section 2-->
<h3><a name="First and second repeats">4.9. First and second repeats</a></h3>
<p class="Body">
First and second repeats can be notated with the symbols <tt>[1</tt> and <tt>[2</tt>,
e.g.
</p>
<pre>faf gfe|[1 dfe dBA:|[2 d2e dcB|].
</pre>
<p class="Body">
When adjacent to bar lines, these can be shortened to <tt> |1</tt> and <tt>:|2</tt>,
but with regard to spaces
</p>
<pre>| [1
</pre>
<p class="Body">
is legal, while
</p>
<pre>| 1
</pre>
<p class="Body">
is not.
</p>
<!--  IO: copied from abcMIDI documentation -->
<p class="Body">
Thus, a tune with different ending for the first and second repeats has the
general form:
</p>
<pre>|:  common body of tune  |1  first ending  :|2  second ending  ||
</pre>
<p class="Body">
Again, note that in many ABC files the |: will not be present.
</p>
<!--End Section 2-->
<h3><a name="Variant Endings">4.10. Variant Endings</a></h3>
<!--  IO: copied from abcMIDI documentation -->
<p class="Body">
In combination with <tt>P</tt> part notation, it is possible to notate more
than two variant endings for a section that is to be repeated a
number of times.
</p>
<p class="Body">
For example, if the header of the tune contains <tt>P:A4.B4</tt> then parts A and
B will each be played 4 times. To play a different ending each time, you
could write in the tune:
</p>
<pre>P:A
&lt;notes&gt; | [1  &lt;notes&gt;  || [2 &lt;notes&gt; || [3 &lt;notes&gt; || [4 &lt;notes&gt; ||
</pre>
<p class="Body">
The Nth ending starts with <tt>[N</tt> and ends with one of '||', ':|' '|]'
or '[|'. You can also mark a section as being used for more than one
ending e.g.
</p>
<pre>[1,3 &lt;notes&gt; ||
</pre>
<p class="Body">
plays on the 1st and 3rd endings and
</p>
<pre>[1-3 &lt;notes&gt; ||
</pre>
<p class="Body">
plays on endings 1, 2 and 3. In general, '[' can be followed by any list
of numbers and ranges as long as it contains no spaces e.g.
</p>
<pre>[1,3,5-7  &lt;notes&gt;  || [2,4,8 &lt;notes&gt; ||
</pre>
<!--End Section 2-->
<h3><a name="Ties and slurs">4.11. Ties and slurs</a></h3>
<p class="Body">
You can tie two notes together either across or within a bar with a '<tt>-</tt>'
symbol, e.g. <tt>abc-|cba</tt> or <tt>abc-cba</tt>. More general slurs can be put in
with <tt>()</tt> symbols. Thus <tt>(DEFG)</tt> puts a slur over the four notes. Spaces
within a slur are OK, e.g. <tt> ( D E F G ) </tt>.
</p>
<!--  IO. Deleted the following paragraph; parsers should be as flexible as -->
<!--  possible! -->
<!--  , but the open bracket should come immediately before a note (and its -->
<!--  accents/accidentals, etc.) and the close bracket should come immediately -->
<!--  after a note (and its octave marker or length). Thus |(=b c'2)| is OK -->
<!--  but |( =b c'2 )| is not. -->
<p class="Body">
Slurs may be nested:
</p>
<pre>(c (d e f) g a)
</pre>
<img src="abc2-draft_files/slur1-80.png" alt="" align="bottom">
<p class="Body">
and they may also start and end on the same note:
</p>
<pre>(c d (e) f g a)
</pre>
<img src="abc2-draft_files/slur2-80.png" alt="" align="bottom">
<p class="Body">
An unnested slur on a singe note, e.g. |c d (e) f g a| is legal, but
will be ignored.
</p>
<!--  Added by IO -->
<p class="Body">
A dotted slur may be notated by preceding the opening brace with a dot,
e.g. <tt>.(cde)</tt>; it is optional to dot the closing brace.  Likewise, a
dotted tie can be transcribed by preceding it with a dot, e.g. <tt>C.-C</tt>.
This is especially useful in parts with multiple verses: some verses may
require a slur, some may not.
</p>
<p class="Body">
It should be noted that although the tie '<tt>-</tt>' and slur '<tt>()</tt>' produce
similar symbols in staff notation they have completely different meanings
to player programs and should not be interchanged. Ties connect two
successive notes of the same pitch, causing them to be played as a single
note, while slurs connect the first and last note of any series of notes,
and may be used to indicate phrasing, or that the group should be played
legato. Both ties and slurs may be used into, out of and between chords,
and in this case the distinction between them is particularly important.
</p>
<!--End Section 2-->
<h3><a name="Grace notes">4.12. Grace notes</a></h3>
<p class="Body">
Grace notes can be written by enclosing them in curly braces, '<tt>{}</tt>'.
For example, a taorluath on the Highland pipes would be written
<tt>{GdGe}</tt>. The tune 'Athol Brose' (in the file <a href="#Strspys.abc">Strspys.abc</a>) has an
example of complex Highland pipe gracing in all its glory. Although
nominally grace notes have no melodic time value, expressions such as
<tt>{a3/2b/}</tt> or <tt>{a&gt;b}</tt> can be useful and are legal although some packages
may ignore them. The unit duration to use for gracenotes is not
specified by the ABC file, but by the package, and might be a specific
amount of time (for playback purposes) or a note length (e.g. 1/32 for
Highland pipe music, which would allow <tt>{ge4d}</tt> to code a piobaireachd
'cadence').
</p>
<p class="Body">
To distinguish between appoggiaturas and acciaccaturas, the latter are
notated with a forward slash immediately following the open brace, e.g.
<tt>{/g}C</tt> or <tt>{/gagab}C</tt>:
</p>
<img src="abc2-draft_files/graces-80.png" alt="" align="bottom">
<p class="Body">
The presence of gracenotes is transparent to the broken rhythm construct.
Thus the forms <tt>A&lt;{g}A</tt> and <tt>A{g}&lt;A</tt> are legal and equivalent to
<tt>A/2{g}A3/2</tt>.
</p>
<!--  IO: The meaning of ~ is defined in the section on musical symbols -->
<!--  Alternatively, the tilde symbol '|~|' represents the general gracing of a -->
<!--  note which, in the context of traditional music, can mean different things -->
<!--  for different instruments, for example a roll, cran or staccato triplet. -->
<!--End Section 2-->
<h3><a name="Duplets, triplets, quadruplets, etc.">4.13. Duplets, triplets, quadruplets, etc.</a></h3>
<p class="Body">
These can be simply coded with the notation <tt>(2ab</tt> for a duplet, <tt>(3abc</tt>
for a triplet or <tt>(4abcd</tt> for a quadruplet, etc, up to <tt>(9</tt>. The musical
meanings are:
</p>
<dl>
<dt><strong>(2</strong></dt><dd> 2 notes in the time of 3</dd>
<dt><strong>(3</strong></dt><dd> 3 notes in the time of 2</dd>
<dt><strong>(4</strong></dt><dd> 4 notes in the time of 3</dd>
<dt><strong>(5</strong></dt><dd> 5 notes in the time of <em>n</em></dd>
<dt><strong>(6</strong></dt><dd> 6 notes in the time of 2</dd>
<dt><strong>(7</strong></dt><dd> 7 notes in the time of <em>n</em></dd>
<dt><strong>(8</strong></dt><dd> 8 notes in the time of 3</dd>
<dt><strong>(9</strong></dt><dd> 9 notes in the time of <em>n</em></dd>
</dl>
<p class="Body">
If the time signature is compound (6/8, 9/8, 12/8) then <em>n</em> is three,
otherwise <em>n</em> is two.
</p>
<p class="Body">
More general tuplets can be specified using the syntax <tt>(p:q:r</tt> which
means 'put <em>p</em> notes into the time of <em>q</em> for the next <em>r</em> notes'.
If <em>q</em> is not given, it defaults as above.  If <em>r</em> is not given, it
defaults to <em>p</em>.  For example, <tt>(3:2:2</tt> is equivalent to <tt>(3::2</tt> and
<tt>(3:2:3</tt> is equivalent to <tt>(3:2</tt> , <tt>(3</tt> or even <tt>(3::</tt> . This can be
useful to include notes of different lengths within a tuplet, for
example <tt>(3:2:2 G4c2</tt> or <tt>(3:2:4 G2A2Bc</tt> and also describes more
precisely how the simple syntax works in cases like <tt>(3 D2E2F2</tt> or even
<tt>(3 D3EF2</tt>. The number written over the tuplet is <em>p</em>.
</p>
<!--  Added by IO -->
<p class="Body">
Spaces that appear between the tuplet specifier (e.g. <tt>(p:q:r</tt>) and the
following notes are to be ignored.
</p>
<!--End Section 2-->
<h3><a name="Decorations">4.14. Decorations</a></h3>
<p class="Body">
Staccato marks (a small dot above or below the note head) can be notated
by a dot before the note, i.e. a staccato triplet is written as <tt>(3.a.b.c</tt>
</p>
<p class="Body">
For fiddlers, the letters <tt>u</tt> and <tt>v</tt> can be used to denote up-bow and
down-bow, e.g. <tt>vAuBvA</tt>
</p>
<p class="Body">
Other common symbols are available such as
</p>
<pre>~       Irish roll
T       trill
H       fermata
L       accent or emphasis
M       lowermordent
P       uppermordent
S       segno
O       coda
</pre>
<p class="Body">
However these characters (<tt>~.uvTHLMPSO</tt>) are just short cuts for
commonly used decorations and can even be redefined (see section
<a href="#Redefinable%20symbols">Redefinable symbols</a>). More generally, symbols can be entered using the
syntax <tt>+symbol+</tt>, e.g. <tt>+trill+A4</tt> for a trill symbol (tr). The
currently defined symbols (and this list may grow with time) are:
</p>
<!--  IO: added +mp+ and removed confusing reference to ~ in turn desc. -->
<!--  added +dacoda+ and +dacapo+, modified description of +D.C.+ -->
<!--  added +>+, +>(+, +>)+, +<(+ and +<)+ (suggested on users list) -->
<!--  IO: following seems to be unsupported -->
<!--  +repeatbar+	    repeat previous whole bar, a % symbol -->
<!--  +repeatbar2+	   repeat previous 2 whole bars, a % symbol with a '2' -->
<!-- 		       adjacent; this can be extended to an arbitrary -->
<!-- 		       number of bars -->
<pre>+trill+                "tr" (trill mark)
+lowermordent+         short /|/|/ squiggle with a vertical line through it
+uppermordent+         short /|/|/ squiggle
+mordent+              same as +lowermordent+
+pralltriller+         same as +uppermordent+
+accent+               &gt; mark
+&gt;+                    same as +accent+
+emphasis+             same as +accent+
+fermata+              fermata or hold (arc above dot)
+invertedfermata+      upside down fermata
+tenuto+               horizontal line to indicate holding note for full
                       duration
+0+ - +5+              fingerings
+plus+                 left-hand pizzicato, or rasp for French horns
+wedge+                small filled-in wedge mark
+open+                 small circle above note indicating open string or
                       harmonic
+thumb+                cello thumb symbol
+snap+                 snap-pizzicato mark, visually similar to +thumb+
+turn+                 a turn mark
+roll+                 a roll mark (arc) as used in Irish music
+breath+               a breath mark (apostrophe-like) after note
+shortphrase+          vertical line on the upper part of the staff
+mediumphrase+         same, but extending down to the centre line
+longphrase+           same, but extending 3/4 of the way down
+segno+                2 ornate s-like symbols separated by a diagonal line
+coda+                 a ring with a cross in it
+D.S.+                 the letters D.S. (=Da Segno)
+D.C.+                 the letters D.C. (=either Da Coda or Da Capo)
+dacoda+               the word "Da" followed by a Coda sign
+dacapo+               the words "Da Capo"
+fine+                 the word "fine"
+crescendo(+  or +&lt;(+  start of a &lt; crescendo mark
+crescendo)+  or +&lt;)+  end of a &lt; crescendo mark, placed after the last note
+diminuendo(+ or +&gt;(+  start of a &gt; diminuendo mark
+diminuendo)+ or +&gt;)+  end of a &gt; diminuendo mark, placed after the last note
+pppp+ +ppp+ +pp+ +p+
+mp+ +mf+ +f+ +ff+
+fff+ +ffff+ +sfz+     dynamics marks
+upbow+                V mark
+downbow+              squared n mark
</pre>
<p class="Body">
By extension, the following decorations have been added: <tt>+slide+</tt>,
<tt>+turnx+</tt>, <tt>+invertedturn+</tt>, <tt>+invertedturnx+</tt>, <tt>+arpeggio+</tt>, <tt>+trill(+</tt>
and <tt>+trill)+</tt>.
</p>
<p class="Body">
Here is a picture of most decorations:
</p>
<img src="abc2-draft_files/decorations1-80.png" alt="" align="bottom">
<p class="Body">
Note that the decorations may be applied to both notes, rests, note
groups, and bar lines. If a decoration is to be positioned between
notes, it may be attached to the '<tt>y</tt>' spacer. Spaces may be used freely
between each of the symbols and the object to which it should be
attached. An object may be preceded by multiple symbols, which should be
printed one over another, each on a different line. For example:
</p>
<pre>+1+ +3+ +5+ [CEG]  +coda+ y  +p+ +trill+ C   +fermata+|
</pre>
<img src="abc2-draft_files/decorations2-80.png" alt="" align="bottom">
<p class="Body">
Players may choose to ignore most of the symbols mentioned above, though
they may be expected to implement the dynamics marks, the accent mark
and the staccato dot. Default volume is equivalent to +mf+. On a scale
from 0-127, the relative volumes can be roughly defined as: <tt>+pppp+</tt> =
<tt>+ppp+</tt> = 30, <tt>+pp+</tt> = 45, <tt>+p+</tt> = 60, <tt>+mp+</tt> = 75, <tt>+mf+</tt> = 90, <tt>+f+</tt> =
105, <tt>+ff+</tt> = 120, <tt>+fff+</tt> = <tt>+ffff+</tt> = 127.
</p>
<p class="Body">
Applications may allow users to define new symbols in a package
dependent way.
</p>
<p class="Body">
Note that symbol names may not contain any spaces, '<tt>[</tt>', '<tt>]</tt>', '|'
or '<tt>:</tt>' signs. So, while +dacapo+ is legal, +da capo+ is not.
</p>
<p class="Body">
If an unimplemented or unknown symbol is found, it should be ignored.
</p>
<!--End Section 2-->
<h3><a name="Symbol lines">4.15. Symbol lines</a></h3>
<p class="Body">
Adding many symbols to a line of music can make a tune difficult to
read. In such cases, a symbol line (a line that contains only <tt>+...+</tt>
decorations and <tt>"..."</tt> chord symbols or annotations) can be used,
analogous to a lyrics line. A symbol line starts with '<tt>s:</tt>', followed
by a line of symbols. Matching of notes and symbols follows the rules
defined in section <a href="#Lyrics">Lyrics</a>.
</p>
<p class="Body">
Example:
</p><pre>   CDEF    | G```AB`c
s: "^slow" | +f+ ** +fff+
</pre>
<p></p>
<!--End Section 2-->
<h3><a name="Redefinable symbols">4.16. Redefinable symbols</a></h3>
<p class="Body">
As a short cut to writing symbols which avoids the <tt>+symbol+</tt> syntax
(see <a href="#decorations">decorations</a>), the letters <tt>H-W</tt> and <tt>h-w</tt> and the symbol
'<tt>~</tt>' can be assigned with the <tt>U:</tt> field. For example, to assign the
letter '<tt>T</tt>' to represent the trill, you can write:
</p>
<pre>U: T = +trill+
</pre>
<p class="Body">
You can also use <tt>"^text"</tt> etc (see <a href="#Annotations">Annotations</a> below) in
definitions, e.g.
</p>
<pre>U: X = "^+"
</pre>
<p class="Body">
to print a plus sign over notes with '<tt>X</tt>' before them.
</p>
<p class="Body">
Symbol definitions can be written in the file header, in which case they
apply to all the tunes in that file, or in a tune header, when they apply
only to that tune, and override any previous definitions. Programs may
also make use of a set of global default definitions, which apply
everywhere unless overridden by local definitions. You can assign the same
symbol to two or more letters e.g.
</p>
<pre>U: T = +trill+
U: U = +trill+
</pre>
<p class="Body">
in which case the same visible symbol will be produced by both letters
(but they may be played differently), and you can de-assign a symbol by
writing:
</p>
<pre>U: T = +nil+
</pre>
<p class="Body">
or
</p>
<pre>U: T = +none+
</pre>
<p class="Body">
The standard set of definitions (if you do not redefine them) is:
</p>
<pre>U: ~ = +roll+
U: T = +trill+
U: H = +fermata+
U: L = +emphasis+
U: M = +lowermordent+
U: P = +uppermordent+
U: S = +segno+
U: O = +coda+
U: u = +upbow+
U: v = +downbow+
</pre>
<p class="Body">
Please see section <a href="#Macros">Macros</a> for an advanced macro mechanism.
</p>
<!--End Section 2-->
<h3><a name="Chords and unisons">4.17. Chords and unisons</a></h3>
<p class="Body">
Chords (i.e. more than one note head on a single stem) can be coded with
<tt>[]</tt> symbols around the notes, e.g.
</p>
<pre>[CEGc]
</pre>
<!--  AFT bug! -->
<p class="Body">
produces the chord of C major.  They can be grouped in beams, e.g.
</p>
<pre>[d2f2][ce][df]
</pre>
<p class="Body">
but there should be no spaces within a chord. See the tune 'Kitchen Girl'
in the file <a href="#Reels.abc">Reels.abc</a> for a simple example.
</p>
<p class="Body">
All the notes within a chord should have the same length.
More complicated chords can be transcribed with the <tt>&amp;</tt> operator,
see section <a href="#Voice%20overlay">Voice overlay</a>.
</p>
<p class="Body">
<em>Some packages allow chords with notes of different</em>
<em>lengths. However, currenly the semantics of such</em>
<em>chords are not well-defined and differ from package to</em>
<em>package.</em>
</p>
<p class="Body">
The chord forms a syntactic grouping, to which the same prefixes and
postfixes can be attached as to an ordinary note, except for
accidentals. In particular, the following notation is legal:
</p>
<pre>( "^I" +f+ [CEG]- &gt; [CEG] "^IV" [F=AC]3/2"^V"[GBD]/  H[CEG]2 )
</pre>
<img src="abc2-draft_files/chords-80.png" alt="" align="bottom">
<p class="Body">
When both inside and outside the chord length modifiers are used,
they should be multiplied. I.e. <tt>[C2E2G2]3</tt> has the same meaning
as <tt>[CEG]6</tt>.
</p>
<p class="Body">
If the chord contains two notes both of the same length and pitch, such as
</p>
<pre>[DD]
</pre>
<p class="Body">
then it is a unison (e.g. a note played on two strings of a violin
simultaneously) and is shown with one stem and two note-heads:
</p>
<img src="abc2-draft_files/unison-80.png" alt="" align="bottom">
<!--End Section 2-->
<h3><a name="Chord symbols">4.18. Chord symbols</a></h3>
<p class="Body">
Chord symbols (e.g. chords/bass notes) can be put in under the
melody line (or above, depending on the package) using double-quotation
marks placed to the left of the note it is sounded with, e.g.
<tt>"Am7"A2D2</tt>.
</p>
<p class="Body">
The chord has the format <em>&lt;note&gt;&lt;accidental&gt;&lt;type&gt;&lt;/bass&gt;</em>, where
<em>&lt;note&gt;</em> can be <tt>A-G</tt>, the optional <em>&lt;accidental&gt;</em> can be <tt>b</tt>, <tt>#</tt>,
the optional <em>&lt;type&gt;</em> is one or more of
</p>
<pre>m or min        minor
maj             major
dim             diminished
aug or +        augmented
sus             sustained
7, 9 ...        7th, 9th, etc.
</pre>
<p class="Body">
and <em>&lt;/bass&gt;</em> is an optional bass note.
</p>
<p class="Body">
A slash after the chord type is used only if the optional bass note is
also used, e.g., <tt>"C/E"</tt>. If the bass note is a regular part of the
chord, it indicates the inversion, i.e., which note of the chord is lowest
in pitch. If the bass note is not a regular part of the chord, it
indicates an additional note that should be sounded with the chord, below
it in pitch. The bass note can be any letter (<tt>A-G</tt> or <tt>a-g</tt>), with or
without a trailing accidental sign (<tt>b</tt> or <tt>#</tt>). The case of the letter
used for the bass note does not affect the pitch.
</p>
<p class="Body">
Alternate chords can be indicated for printing purposes (but not for
playback) by enclosing them in parentheses inside the double-quotation
marks after the regular chord, e.g., <tt>"G(Em)"</tt>.
</p>
<p class="Body">
Programs should treat chord symbols quite liberally.
</p>
<!--End Section 2-->
<h3><a name="Annotations">4.19. Annotations</a></h3>
<p class="Body">
General text annotations can be added above, below or on the staff in a
similar way to chord symbols. In this case, the string within double
quotes is preceded by one of five symbols '<tt>^</tt>', '<tt>_</tt>', '<tt>&lt;</tt>', '<tt>&gt;</tt>' or
'<tt>@</tt>' which controls where the annotation is to be placed; above, below,
to the left or right respectively of the following note, rest or bar
line. Using the '<tt>@</tt>' symbol leaves the exact placing of the string to
the discretion of the interpreting program. These placement specifiers
distinguish annotations from chord symbols, and should prevent programs
from attempting to play or transpose them. All text that follows the
placement specifier is treated as an <a href="#ABC%20string">ABC string</a>.
</p>
<p class="Body">
Where two or more annotations with the same placement specifier are
placed consecutively, e.g. for fingerings, the notation program should
draw them on separate lines, with the first listed at the top. 
</p>
<p class="Body">
Example:
</p><pre>"&lt;(" "&gt;)" C
</pre>
Places the note between parentheses.
<p></p>
<!--End Section 2-->
<h3><a name="Order of ABC constructs">4.20. Order of ABC constructs</a></h3>
<p class="Body">
The order of ABC constructs is: <em>&lt;grace notes&gt;</em>, <em>&lt;chord symbols&gt;</em>,
<em>&lt;annotations&gt;/&lt;decorations&gt;</em> (e.g. Irish roll, staccato marker or
up/downbow), <em>&lt;accidentals&gt;</em>, <em>&lt;note&gt;</em>, <em>&lt;octave&gt;</em>, ''&lt;note
length&gt;'', i.e. <tt>~^c'3</tt> or even <tt>"Gm7"v.=G,2</tt>.
</p>
<p class="Body">
Tie symbols, '<tt>-</tt>', should come immediately after a note group but may
be followed by a space, i.e. <tt>=G,2- </tt>. Open and close chord symbols,
<tt>[]</tt>, should enclose entire note sequences (except for chord symbols),
i.e.
</p>
<pre>"C"[CEGc]| or |"Gm7"[.=G,^c']
</pre>
<p class="Body">
and open and close slur symbols, <tt>()</tt>, should do likewise, i.e.
</p>
<pre>"Gm7"(v.=G,2~^c'2)
</pre>
<!--  IO: Removed this part, which is not flexible enough, -->
<!--      only complicates the standard, and does not conform -->
<!--      to the previous draft standard. -->
<!-- 	[note pitch] The note may be only '|G|' (treble clef), -->
<!-- 	'|C|' (alto clef) or '|F|' (bass clef). -->
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="Lyrics">5. Lyrics</a></h2>
<!--  IO: I mentioned uppercase W, added various clarifications -->
<p class="Body">
The <tt>W</tt> field (uppercase W) can be used for lyrics to be printed
separately below the tune. 
</p>
<p class="Body">
The <tt>w</tt> field (lowercase w) in the body, supplies a line of lyrics to be
aligned syllable by syllable below the previous line of notes. Syllables
are not aligned on grace notes and tied notes are treated as two
separate notes; slurred or beamed notes are also treated as separate
notes in this context. Note that lyrics are always aligned to the
beginning of the preceding music line.
</p>
<!--  IO: Copied from abcMIDI documentation -->
<p class="Body">
It is possible for a music line to be followed by several <tt>w</tt> fields.
This can be used together with the part notation to create verses. The
first <tt>w</tt> field is used the first time that part is played, then the
second and so on.
<!--  If the tune uses repeats, these must be placed at the end of a line of -->
<!--  music in order to make sure that the start of a |w| field matches up -->
<!--  with the repeat. -->
</p>
<p class="Body">
The lyrics lines are treated as an <a href="#ABC%20string">ABC string</a>. Within the lyrics, the
words should be separated by one or more spaces and to correctly align
them the following symbols may be used:
</p>
<dl>
<dt><strong><tt>-</tt></strong></dt><dd> (hyphen) break between syllables within a word</dd>
<dt><strong><tt>_</tt></strong></dt><dd> (underscore) last syllable is to be held for an extra note</dd>
<dt><strong><tt>*</tt></strong></dt><dd> one note is skipped (i.e. * is equivalent to a blank syllable)</dd>
<dt><strong><tt>~</tt></strong></dt><dd> appears as a space; aligns multiple words under one note </dd>
<dt><strong><tt>\-</tt></strong></dt><dd> appears as hyphen; aligns multiple syllables under one note</dd>
<dt><strong>|</strong></dt><dd>  advances to the next bar</dd>
</dl>
<p class="Body">
Note that if '<tt>-</tt>' is preceded by a space or another hyphen, it is
regarded as a separate syllable.
</p>
<p class="Body">
When an underscore is used next to a hyphen, the hyphen must always come
first.
</p>
<p class="Body">
If there are not as many syllables as notes in a measure, typing a '|'
automatically advances to the next bar; if there are enough syllables
the '|' is just ignored.
</p>
<p class="Body">
Some examples:
</p>
<pre>w: syll-a-ble    is aligned with three notes
w: syll-a--ble   is aligned with four notes
w: syll-a -ble   (equivalent to the previous line)
w: time__        is aligned with three notes
w: of~the~day    is treated as one syllable (i.e. aligned with one note)
                 but appears as three separate words

 gf|e2dc B2A2|B2G2 E2D2|.G2.G2 GABc|d4 B2
w: Sa-ys my au-l' wan to your aul' wan\
   Will~ye come to the Wa-x-ies dar-gle?
</pre>
<p class="Body">
Please see section <a href="#Continuation%20of%20input%20lines">Continuation of input lines</a> for the meaning of the
backslash (||) character.
</p>
<!--  IO: copied from abcm2ps documentation -->
<p class="Body">
If a word starts with a digit, this is interpreted as numbering of a
stanza and is pushed forward a bit. In other words, use something like
</p><pre>   w: 1.~Three blind mice
</pre>
to put a number before "Three".
<p></p>
<!--End Section 1-->
<h2><a name="Clefs">6. Clefs</a></h2>
<p class="Body">
A clef line specification may be provided in <tt>K:</tt> and <tt>V:</tt> fields.
The general syntax is:
</p>
<pre>        [clef=]&lt;clef name&gt;[&lt;line number&gt;][+8 | -8]
          [middle=&lt;pitch&gt;] [transpose=&lt;semitones&gt;]
          [stafflines=&lt;lines&gt;]
</pre>
<dl>
<dt><strong>clef name</strong></dt><dd> May be <tt>treble</tt>, <tt>alto</tt>, <tt>tenor</tt>, <tt>bass</tt>, <tt>perc</tt> or <tt>none</tt>. <tt>perc</tt> selects the drum clef. <tt>clef=</tt> may be omitted.</dd>
<dt><strong>line number</strong></dt><dd> Indicates on which staff line the base clef is written. Defaults are: treble: <tt>2</tt>; alto: <tt>3</tt>; tenor: <tt>4</tt>; bass: <tt>4</tt>.</dd>
<dt><strong>+8 -8</strong></dt><dd> draws '8' above or below the staff. The player will transpose the notes one octave higher or lower.</dd>
<dt><strong>middle=&lt;pitch&gt;</strong></dt><dd> is an alternate way 
to define the line number of the clef. The pitch indicates what note is 
displayed on the 3rd line of the staff. Defaults are: treble: <tt>B</tt>; alto: <tt>C</tt>; tenor: <tt>A,</tt>; bass: <tt>D,</tt>; none: <tt>B</tt>.</dd>
<dt><strong>transpose=&lt;semitones&gt;</strong></dt><dd> When playing, 
transpose the current voice by the indicated amount of semitones. This 
does not affect the printed score. Default is 0.</dd>
<dt><strong>stafflines=&lt;lines&gt;</strong></dt><dd> The number of lines in the staff. Default is 5.</dd>
</dl>
<p class="Body">
Note that the <tt>clef</tt>, <tt>transpose</tt>, <tt>middle</tt> and <tt>stafflines</tt> specifiers
may be used independent of each other.
</p>
<p class="Body">
Examples:
</p><pre>[K:   clef=alto]
[K:   perc stafflines=1]
[K:Am transpose=-2]
[V:B  middle=d bass]
</pre>
<p></p>
<p class="Body">
Note that although this standard supports the drum clef, there is
currently no support for special percussion notes.
</p>
<p class="Body">
The middle specifier can be handy when working in the bass clef.
Setting <tt>K:bass middle=d</tt> will save you from adding comma specifiers
to the notes. The specifier may be abbreviated to <tt>m=</tt>.
</p>
<p class="Body">
The transpose specifier is useful for e.g. a Bb clarinet, for which the
music is written in the key of C, although the instrument plays it in
the key of Bb:
</p>
<pre>[V:Clarinet] [K:C transpose=-2]
</pre>
<p class="Body">
The transpose specifier may be abbreviated to <tt>t=</tt>.
</p>
<p class="Body">
To notate the various standard clefs, one can use the following
specifiers:
</p>
<!--  IO: Added Description-Name captions -->
<!-- 2 columns --><table border="">
<caption>The seven clefs</caption>
<tbody><tr><th>Name&nbsp;&nbsp;</th><th>specifier </th></tr>
<tr><td>Treble      </td><td><tt>K:treble</tt></td></tr>
<tr><td>Bass&nbsp;&nbsp;</td><td><tt>K:bass</tt>  </td></tr>
<tr><td>Baritone    </td><td><tt>K:bass3</tt> </td></tr>
<tr><td>Tenor       </td><td><tt>K:tenor</tt> </td></tr>
<tr><td>Alto&nbsp;&nbsp;</td><td><tt>K:alto</tt>  </td></tr>
<tr><td>Mezzosoprano</td><td><tt>K:alto2</tt> </td></tr>
<tr><td>Soprano     </td><td><tt>K:alto1</tt> </td></tr>
</tbody></table>
<p class="Body">
More clef names may be allowed in the future, therefore unknown names
should be ignored. If the clef is unknown or not specified, the default
is treble.
</p>
<p class="Body">
Applications may introduce their own clef line specifiers. These
specifiers should start with the name of the application, followed a
colon, folowed by the name of the specifier.
</p>
<p class="Body">
Example:
</p><pre>V:p1 perc stafflines=3 m=C  mozart:noteC=snare-drum
</pre>
<p></p>
<!--End Section 1-->
<h2><a name="Multiple voices">7. Multiple voices</a></h2>
<p class="Body">
The <tt>V:</tt> field allows the writing of multi-voice music. In multi-voice
ABC tunes, the tune body is divided into several sections, each
beginning with a <tt>V:</tt> field. All the notes following such a <tt>V:</tt> field,
up to the next <tt>V:</tt> field or the end of the tune body, belong to the
voice.
</p>
<p class="Body">
The basic syntax of the field is:
</p><pre>V:ID
</pre>
<p></p>
<p class="Body">
where ID can be either a number or a string, that uniquely identifies
the voice in question. When using a string, only the first 20 characters
of it will be distinguished. The ID will not be printed on the staff;
it's only function is to indicate throughout the ABC file, which music
line belongs to which voice.
</p>
<p class="Body">
Example:
</p>
<pre>X:1
T:Zocharti Loch
C:Louis Lewandowski (1821-1894)
M:C
Q:1/4=76
%%score (T1 T2) (B1 B2)
V:T1           clef=treble-8  name="Tenore I"   snm="T.I"
V:T2           clef=treble-8  name="Tenore II"  snm="T.II"
V:B1  middle=d clef=bass      name="Basso I"    snm="B.I"
V:B2  middle=d clef=bass      name="Basso II"   snm="B.II"
K:Gm
%            End of header, start of tune body:
% 1
[V:T1]  (B2c2 d2g2)  | f6e2      | (d2c2 d2)e2 | d4 c2z2 |
[V:T2]  (G2A2 B2e2)  | d6c2      | (B2A2 B2)c2 | B4 A2z2 |
[V:B1]       z8      | z2f2 g2a2 | b2z2 z2 e2  | f4 f2z2 |
[V:B2]       x8      |     x8    |      x8     |    x8   |
% 5
[V:T1]  (B2c2 d2g2)  | f8        | d3c (d2fe)  | H d6    ||
[V:T2]       z8      |     z8    | B3A (B2c2)  | H A6    ||
[V:B1]  (d2f2 b2e'2) | d'8       | g3g  g4     | H^f6    ||
[V:B2]       x8      | z2B2 c2d2 | e3e (d2c2)  | H d6    ||
</pre>
<p class="Body">
This layout closely resembles printed music, and permits the
corresponding notes on different voices to be vertically aligned so that
the chords can be read directly from the abc. The addition of single
remark lines '<tt>%</tt>' between the grouped staves, indicating the bar
nummers, also makes the source more legible.
</p>
<p class="Body">
Here follows the visible output:
</p>
<img src="abc2-draft_files/multivoice-80.png" alt="" align="bottom">
<p class="Body">
Here follows the audible output:
</p>
<p class="Body">
<a href="http://abc.sourceforge.net/standard/src/multivoice.mid">MIDI </a>
</p>
<p class="Body">
<tt>V:</tt> can appear both in the body and the header. In the latter case,
<tt>V:</tt> is used exclusively to set voice properties. For example, the
<tt>name</tt> property in the example above, specifies which label should be
printed on the first staff of the voice in question. Note that these
properties may be also set or changed in the tune body. The <tt>V:</tt>
properties will be fully explained in the next section.
</p>
<p class="Body">
Please note that the exact grouping of voices on the staff or staves is
not specified by <tt>V:</tt> itself. This may be specified with the
<tt>%%score</tt> stylesheet directive. See section <a href="#Voice%20grouping">Voice grouping</a> for
details. Please see section <a href="#Instrumentation%20directives">Instrumentation directives</a> to learn how to
assign a General MIDI instrument to a voice, using a <tt>%%MIDI</tt>
stylesheet directive.
</p>
<p class="Body">
Although it is not recommended, the tune body of fragment <tt>X:1</tt>, could
also be notated this way:
</p>
<pre>X:2
T:Zocharti Loch
%...skipping rest of the header...
K:Gm
%               Start of tune body:
V:T1
 (B2c2 d2g2) | f6e2 | (d2c2 d2)e2 | d4 c2z2 |
 (B2c2 d2g2) | f8 | d3c (d2fe) | H d6 ||
V:T2
 (G2A2 B2e2) | d6c2 | (B2A2 B2)c2 | B4 A2z2 |
 z8 | z8 | B3A (B2c2) | H A6 ||
V:B1
 z8 | z2f2 g2a2 | b2z2 z2 e2 | f4 f2z2 |
 (d2f2 b2e'2) | d'8 | g3g  g4 | H^f6 ||
V:B2
 x8 | x8 | x8 | x8 |
 x8 | z2B2 c2d2 | e3e (d2c2) | H d6 ||
</pre>
<p class="Body">
In the example above, each <tt>V:</tt> label occurs only once, and the complete
part for that voice follows. The output of tune <tt>X:2</tt> will be exactly
the same as the ouput of tune <tt>X:1</tt>; the source code of <tt>X:1</tt>, however,
is much better readable.
</p>
<!-- Start SectLevel2 -->
<h3><a name="Voice properties">7.1. Voice properties</a></h3>
<p class="Body">
<tt>V:</tt> fields can contain voice specifiers such as name, clef, and so on.
For example,
</p>
<pre>V:T name="Tenor" clef=treble-8
</pre>
<p class="Body">
indicates that voice 'T' will be drawn on a staff labelled "Tenor",
using the treble clef with a small '8' underneath. Player programs will
transpose the notes by one octave. 
Possible voice definitions include:
</p>
<dl>
<dt><strong>name="voice name"</strong></dt><dd> The voice name is printed on the left of the first staff only. The characters '\n' produce a newline int the output.</dd>
<dt><strong>subname="voice subname"</strong></dt><dd> The voice subname is printed on the left of all staves but the first one.</dd>
<dt><strong>stem=up/down</strong></dt><dd> Forces the note stem direction.</dd>
<dt><strong>clef=</strong></dt><dd> Specifies a clef; see section <a href="#Clefs">Clefs</a> for details.<!--  AFT bug/oddity! -->
</dd>
</dl>
<p class="Body">
The name specifier may be abbreviated to <tt>nm=</tt>. The subname
specifier may be abbreviated to <tt>snm=</tt>.
</p>
<p class="Body">
Applications may implement their own specifiers, but must gracefully
ignore specifiers they don't understand or implement. This is required
for portability of ABC files between applications.
</p>
<!--End Section 2-->
<h3><a name="Breaking lines">7.2. Breaking lines</a></h3>
<p class="Body">
The rules for breaking lines in multi-voice ABC files are the same as
described above. Each line of input may end in a backslash (\) to
continue it; lyrics should immediately follow in <tt>w:</tt> lines (if any).
See the example tune <a href="#Canzonetta.abc">Canzonetta.abc</a>.
</p>
<!--End Section 2-->
<h3><a name="Inline fields">7.3. Inline fields</a></h3>
<p class="Body">
To avoid ambiguity, inline fields that specify music properties should be
repeated in each voice. For example,
</p>
<pre>...
P:C
[V:1] C4|[M:3/4]CEG|Gce|
[V:2] E4|[M:3/4]G3 |E3 |
P:D
...
</pre>
<!--  Jef writes: -->
<!--  For a long time, P: raises a problem with is not yet solved: -->
<!--  1) does P: applies to the current voice, or -->
<!--  2) does it reinitialize the parser, and switches to the first voice? -->
<!--  With 1), you shall have: -->
<!--     [V:1] [P:C] C4|[M:3/4]CEG|Gce| -->
<!--     [V:2] [P:C] E4|[M:3/4]G3 |E3 | -->
<!--  and this is easier for voice extraction. -->
<!--  With 2), the example works, but not with BarFly. -->
<!--End Section 2-->
<h3><a name="Voice overlay">7.4. Voice overlay</a></h3>
<p class="Body">
The <tt>&amp;</tt> operator may be used to temporarily overlay several voices
within one measure. The <tt>&amp;</tt> operator sets the time point of the music
back to the previous bar line, and the notes which follow it form a
temporary voice in parallel with the preceding one. This may only be
used to add one complete bar's worth of music for each <tt>&amp;</tt>.
</p>
<p class="Body">
Example:
</p>
<pre>A2 | c d e f g  a  &amp;\
     A A A A A  A  &amp;\
     F E D C B, A, |]
</pre>
<img src="abc2-draft_files/overlay1-80.png" alt="" align="bottom">
<p class="Body">
It can also be used to overlay a pattern of chord symbols on a melody
line:
</p>
<pre>B4              z   +5+c (3BAG &amp;\
"Em" x2 "G7" x2 "C" x4         |
</pre>
<img src="abc2-draft_files/overlay2-80.png" alt="" align="bottom">
<p class="Body">
Likewise, the <tt>&amp;</tt> operator may be used in <tt>w:</tt> lyrics and in <tt>s:</tt>
symbol lines, to provide a separate line of lyrics and symbols
to each of the overlayed voices:
</p>
<pre>   g4 f4 | e6 e2  &amp;\
   (d8   | c6) c2
w: ha-la-| lu-yoh &amp;\
   lu-   |   -yoh
</pre>
<img src="abc2-draft_files/overlay3-80.png" alt="" align="bottom">
<p class="Body">
In meter free music, invisible bar line signs '[|]' may be used instead of
regular ones.
</p>
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="ABC data format">8. ABC data format</a></h2>
<p class="Body">
Each line in the file may end with blank space which will be ignored.
For the purpose of this standard, ASCII Tab and ASCII Space characters
are equivalent and are both designated with the term 'space.'
Applications must be able to interpret end-of-line markers in Unix
(<tt>&lt;LF&gt;</tt>), PC (<tt>&lt;CR&gt;&lt;LF&gt;</tt>), and Macintosh style (<tt>&lt;CR&gt;</tt>) correctly.
</p>
<!-- Start SectLevel2 -->
<h3><a name="Tune body">8.1. Tune body</a></h3>
<p class="Body">
Within the tune body, all the printable ASCII characters may be used for
the actual music notation. These are:
</p>
<pre> !"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@
ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`
abcdefghijklmnopqrstuvwxyz{|}~
</pre>
<p class="Body">
Of these, the following characters are currently reserved:
</p>
<pre># $ * ; ? @
</pre>
<p class="Body">
In future standards they may be used to extend the ABC syntax.
</p>
<p class="Body">
To ensure forward compatibility, current software should ignore these
characters when they appear inside or between note groups, possibly
giving a warning. However, these characters may not be ignored when they
appear inside ABC strings or fields. 
</p>
<p class="Body">
Example:
</p>
<pre>@a +pp+ #bc2/3* [K:C#] de?f "@this $2was difficult to parse?" y |**
</pre>
<p class="Body">
should be treated as:
</p>
<pre>a +pp+ bc2/3 [K:C#] def "@this $2was difficult to parse?" y |
</pre>
<!--End Section 2-->
<h3><a name="ABC string">8.2. ABC string</a></h3>
<p class="Body">
The contents of ABC strings may be written using any character set. The
default ABC string character set is Latin-1, which is convenient since
it is also the default used in webpages. If you would like to use a
different character set, such as utf-8, you may find more information in
section <a href="#Charset%20field">Charset field</a>.
</p>
<p class="Body">
To write non-English characters in ABC strings, special sequences of
characters should be used to avoid portability problems. These sequences
start with a backslash (\), followed by an accent and a letter.
</p>
<pre>accent          example         how to write it
-----------------------------------------------

grave           À à è ò         \`A \`a \`e \`o
acute           Á á é ó         \'A \'a \'e \'o
circumflex      Â â ê ô         \^A \^a \^e \^o
umlaut          Ä ä ë ö         \"A \"a \"e \"o
tilde           Ã ã ñ õ         \~A \~a \~n \~o
cedilla         Ç ç             \,C \,c
slash           Ø ø             \/O \/o
ring            Å å             \oA \oa
ligature        ß Æ æ           \ss \AE \ae
</pre>
<p class="Body">
To get an actual backslash, type <tt>\\</tt>.
</p>
<p class="Body">
To typeset a <em>macron</em> on a letter <em>x</em>, type <tt>\=x</tt>. To typeset an
<em>ogonek</em>, type <tt>\;x</tt>. To typeset a <em>caron</em>, type <tt>\vx</tt>. To typeset a
<em>breve</em>, type <tt>\ux</tt>. To typeset a long Hungarian umlaut, type <tt>\:x</tt>.
Finally, to typeset a dotted letter, type <tt>\.x</tt>.
</p>
<p class="Body">
Programs that have difficulty typesetting accented letters may reduce
them to the base letter. <tt>\"y</tt> can be reduced to <tt>y</tt>, <tt>\oA</tt> can be
reduced to <tt>A</tt>, etc. Ligatures can be reduced by simply ignoring the
backslash: <tt>\ss</tt> becomes <tt>ss</tt>, <tt>\AE</tt> becomes <tt>AE</tt>, etc.
</p>
<p class="Body">
There is a <a href="#Full%20table%20of%20accented%20letters">Full table of accented letters</a> in the appendix.
</p>
<p class="Body">
Characters may also be coded by typing <tt>\d</tt> followed by the decimal code
of the character, followed by a semicolon. The meaning of these codes
depends on the character set used. Some examples for the default Latin-1
charset: <tt>\d163;</tt> = <tt>£</tt>, <tt>\d161;</tt> = <tt>¡</tt> and <tt>\d191;</tt> = <tt>¿</tt>.
</p>
<p class="Body">
Furthermore, a number of special symbols can be used in ABC strings. To
typeset the international copyright symbol, write <tt>(C)</tt>. To typeset a
flat sign, write <tt>(b)</tt>. To typeset a sharp sign, write <tt>(#)</tt>. To
typeset a natural sign, write <tt>(=)</tt>.
</p>
<p class="Body">
The specifiers <tt>$1</tt>, <tt>$2</tt>, <tt>$3</tt> and <tt>$4</tt> can be used to change the font
within an ABC string. The fonts to be used can be indicated with the
<tt>%%setfont-n</tt> stylesheet directive. <tt>$0</tt> resets the font to its
default value. <tt>$$</tt> gives an actual dollar sign. See section
<a href="#Font%20Settings">Font Settings</a> for full details.
</p>
<p class="Body">
Examples:
</p><pre>%%abc-copyright (C) Fr\'ed\'erique M\"oller
"^A((#))" (^)A
w: Will~ye come to the $3Wa-x-ies$0 dar-gle?
</pre>
<p></p>
<!--  IO: From Phil Taylor's website -->
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="Macros">9. Macros</a></h2>
<p class="Body">
This standard defines an <strong>optional</strong> system of macros which is
principally used to define the way in which ornament symbols such as the
tilde <tt>~</tt> are played (although it could be used for many other
purposes).
</p>
<p class="Body">
Software implementing these macros, should first expand the macros
defined in this section, and only afterwards apply any relevant <tt>U:</tt>
replacement (see section <a href="#Redefinable%20symbols">Redefinable symbols</a>).
</p>
<p class="Body">
When these macros are stored in an ABC Header file (see section
<a href="#Include%20field">Include field</a>), they may form a powerful library.
</p>
<p class="Body">
There are two kinds of macro, called Static and Transposing.
</p>
<!-- Start SectLevel2 -->
<h3><a name="Static macros">9.1. Static macros</a></h3>
<p class="Body">
You define a static macro by writing into the tune header something like
this:
</p>
<pre> m: ~G3 = G{A}G{F}G
</pre>
<p class="Body">
When you play the tune, the program searches the tune header for macro
definitions, then does a search and replace on its internal copy of the
text before passing that to the parser which plays the tune. Every
occurence of <tt>~G3</tt> in the tune is replaced by <tt>G{A}G{F}G</tt>, and that is
what gets played. Only <tt>~G3</tt> notes are affected, <tt>~G2</tt>,
<tt>~g3</tt>, <tt>~F3</tt> etc. are ignored.
</p>
<p class="Body">
You can put in as many macros as you want, and indeed, if you only use
static macros you will need to write a separate macro for each
combination of pitch and note-length. Here is an example:
</p>
<pre>X:50
T:Apples in Winter
S:Trad, arr. Paddy O'Brien
R:jig
E:9
m: ~g2 = {a}g{f}g
m: ~D2 = {E}D{C}D
M:6/8
K:D
G/2A/2|BEE dEE|BAG FGE|~D2D FDF|ABc ded|
BEE BAB|def ~g2 e|fdB AGF|GEE E2:|
d|efe edB|ege fdB|dec dAF|DFA def|
[1efe edB|def ~g2a|bgb afa|gee e2:|
[2edB def|gba ~g2e|fdB AGF|GEE E2||
</pre>
<p class="Body">
 
Here I have put in two static macros, since there are two different
notes in the tune marked with a tilde.
</p>
<p class="Body">
A static macro definition consists of four parts:
</p>
<ul>
<li> the field identifier <tt>m:</tt> </li>
<li> the target string - e.g <tt>~G3</tt> </li>
<li> the equals sign </li>
<li> the replacement string - e.g. <tt>G{A}G{F}G</tt></li>
</ul>
<p class="Body">
The target string can consist of any string up to 31 characters in
length, except that it may not include the letter 'n', for reasons which
will become obvious later. You don't have to use the tilde, but of
course if you don't use a legal combination of abc, other programs will
not be able to play your tune.
</p>
<p class="Body">
The replacement string consists of any legal abc text up to 200
characters in length. It's up to you to ensure that the target and
replacement strings occupy the same time interval (the program does not
check this). Both the target and replacement strings may have spaces
embedded if necessary, but leading and trailing spaces are stripped off
so
</p>
<pre>m:~g2={a}g{f}g
</pre>
<p class="Body">
is perfectly OK, although less readable.
</p>
<!--End Section 2-->
<h3><a name="Transposing macros">9.2. Transposing macros</a></h3>
<p class="Body">
If your tune has ornaments on lots of different notes, and you want them
to all play with the same ornament pattern, you can use transposing
macros to achieve this. Transposing macros are written in exactly the
same way as static macros, except that the note symbol in the target
string is represented by 'n' (meaning any note) and the note symbols in
the replacement string by other letters (h to z) which are interpreted
according to their position in the alphabet relative to n. 
</p>
<p class="Body">
So, for example I could re-write the static macro <tt>m: ~G3 = G{A}G{F}G</tt>
as a transposing macro <tt>m: ~n3 = n{o}n{m}n</tt>. When the transposing macro
is expanded, any note of the form <tt>~n3</tt> will be replaced by the
appropriate pattern of notes. Notes of the form <tt>~n2</tt> (or other lengths)
will be ignored, so you will have to write separate transposing macros
for each note length.
</p>
<p class="Body">
Here's an example:
</p>
<pre>X:35
T:Down the Broom
S:Trad, arr. Paddy O'Brien 
R:reel
M:C|
m: ~n2 = (3o/n/m/ n                % One macro does for all four rolls
K:ADor
EAAG~A2 Bd|eg~g2 egdc|BGGF GAGE|~D2B,D GABG|
EAAG ~A2 Bd|eg~g2 egdg|eg~g2 dgba|gedB BAA2:|
~a2ea agea|agbg agef|~g2dg Bgdg|gfga gede|
~a2 ea agea|agbg ageg|dg~g2 dgba|gedB BA A2:|
</pre>
<p class="Body">
 
A transposing macro definition consists of four parts:
</p>
<ul>
<li> the field identifier <tt>m:</tt></li>
<li> the target string - e.g <tt>~n3</tt></li>
<li> the equals sign </li>
<li> the replacement string - e.g. <tt>n{o}n{m}n</tt></li>
</ul>
<p class="Body">
The target string can consist of any string up to 31 characters in
length, except that it must conclude with the letter 'n', followed by a
number which specifies the note length.
</p>
<p class="Body">
The replacement string consists of any legal abc text up to 200
characters in length, where note pitches are defined by the letters h -
z, the pitches being interpreted relative to that of the letter n. Once
again you should ensure that the time intervals match. You should not
use accidentals in transposing macros (I can't for the life of me think
of a way to transpose <tt>~=a3</tt> or <tt>~^G2</tt> which will work
correctly under all circumstances, so if you need to do this you must
use a static macro.)
</p>
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="Deprecated ABC syntax">10. Deprecated ABC syntax</a></h2>
<!-- Start SectLevel2 -->
<h3><a name="Deprecated fields">10.1. Deprecated fields</a></h3>
<!--  An |I:| field was used by the |playabc| program to support package -->
<!--  dependent directives. These are now handled with the |%%| notation; -->
<!--  see the [ABC Stylesheet specification]. -->
<p class="Body">
An <tt>E:</tt> field was once used by <tt>abc2mtex</tt> to explicitly control note
spacing; this is no longer neccesary with current formatting algorithms.
</p>
<p class="Body">
The <tt>A:</tt> field was used to contain area information. Now, the <tt>A:</tt> field
contains the name of the lyrics author, and area information can be
stored in the <tt>O:</tt> field.
</p>
<!--End Section 2-->
<h3><a name="Deprecated decorations">10.2. Deprecated decorations</a></h3>
<p class="Body">
The widespread <tt>abc2win</tt> program used a '<tt>!</tt>' character to force line
breaks, while the previous ABC standard adopted a <tt>!...!</tt> syntax to
indicate decorations.
</p>
<p class="Body">
The <tt>abc2win</tt> usage obviously conflicted with the <tt>!...!</tt> style notation
for decorations (see section <a href="#Decorations">Decorations</a>). Therefore the
current standard deprecates the <tt>!...!</tt> notation in favour of a <tt>+...+</tt>
style symbol notation.
</p>
<p class="Body">
To support both the deprecated <tt>!...!</tt> syntax and the '<tt>!</tt>' line breaks,
the following algorithm is proposed:
</p>
<p class="Body">
When encountering a <tt>!</tt>, scan forward. If you find another <tt>!</tt> before
encountering any of "|[:]", a space, or the end of line, then you have
a decoration, otherwise it is a line break.
</p>
<p class="Body">
Users should avoid using <tt>!</tt> line breaks together with the deprecated
<tt>!...!</tt> symbol syntax.
</p>
<!--End Section 2-->
<h3><a name="Deprecated continuations">10.3. Deprecated continuations</a></h3>
<p class="Body">
The following fragment of code:
</p><pre>G2G2A4 | (FEF) D (A2G) G|\
 M:4/4
 K:C
             c2c2(B2c2) |
</pre>
<p></p>
<p class="Body">
was considered to be equivalent to:
</p><pre>G2G2A4 | (FEF) D (A2G) G|[M:4/4][K:C]c2c2(B2c2) |
</pre>
<p></p>
<p class="Body">
Furthermore, the following code:
</p><pre>w: Sa-ys my au-l' wan to your aul' wan\
w: Will~ye come to the Wa-x-ies dar-gle?
</pre>
<p></p>
<p class="Body">
was considered to be equivalent to:
</p><pre>w: Sa-ys my au-l' wan to your aul' wan\
   Will~ye come to the Wa-x-ies dar-gle?
</pre>
<p></p>
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="ABC Stylesheet specification">11. ABC Stylesheet specification</a></h2>
<p class="Body">
Music is not only played by humans, but is also conveniently typeset or
played by computer programs. The ABC language, however, is a high-level
description of music, which only deals with structural information. How
this structural information is to be actually rendered by e.g. a
typesetter or a player can be controlled using an ABC Stylesheet.
</p>
<p class="Body">
An ABC stylesheet consists of <em>directives</em> which are interspersed in a
normal ABC file, or collected in an ABC Header file (see section
<a href="#Include%20field">Include field</a>). These are lines that <em>start</em> with '<tt>%%</tt>',
followed by keywords that give indications to typesetting or player
programs. Some examples could be:
</p>
<pre>%%papersize A4
%%newpage
%%setbarnb 10
</pre>
<p class="Body">
Alternatively, the directives may be contained in an <tt>I:</tt> (instruction)
field:
</p><pre>I:papersize A4
I:newpage
I:setbarnb 10
</pre>
There may be given only one directive per <tt>I:</tt> field. The inline field
notation may be used to give a directive in the middle of a line of
music:
<p></p>
<pre>CDEFG|[I:setbarnb 10]ABc
</pre>
<p class="Body">
If a program doesn't recognise a directive, it should just ignore it.
</p>
<p class="Body">
Predictably, the list of possible directives is long. Applications
should provide directives for specifying system and page layout, text
annotations, fonts, spacings, voice instruments, transposition, and
possibly other details.
</p>
<p class="Body">
It should be stressed that the ABC stylesheet specification is not part
of the ABC specification itself. It forms an additional standard.
Strictly speaking, ABC applications don't have to conform to the same
set of directives. However, it's highly desirable that they do: this
arrangement will make the same ABC file portable between different
computer systems.
</p>
<p class="Body">
In fact, the ABC standard relates to the ABC Stylesheet specification,
as HTML relates to CSS.
</p>
<!-- Start SectLevel2 -->
<h3><a name="Voice grouping">11.1. Voice grouping</a></h3>
<p class="Body">
Basic syntax:
</p><pre>%%score &lt;voice-id1&gt; &lt;voice-id2&gt; ... &lt;voice-idn&gt;
</pre>
<p></p>
<p class="Body">
The score directive specifies which voices should be printed in the
score and how they should be grouped on the staves.
</p>
<p class="Body">
Voices that are enclosed by parentheses '<tt>()</tt>', will go on one staff.
Together they form a voice group. A voice that is not enclosed by
parentheses forms a voice group on its own, that will be printed on a
separate staff.
</p>
<p class="Body">
If voice groups are enclosed by curly braces '<tt>{}</tt>', the corresponding
staves will be connected by a big curly brace printed in front of the
staves. Together they form a voice block. This format is used especially
for typesetting keyboard music.
</p>
<p class="Body">
If voice groups or braced voice blocks are enclosed by brackets '<tt>[]</tt>',
the corresponding staves will be connected by a big bracket printed in
front of the staves. Together they form a voice block.
</p>
<p class="Body">
If voice blocks, or voice groups are separated from each other by a '|'
character, continued bar lines will be drawn between the associated staves.
</p>
<p class="Body">
Example:
</p><pre>%%score Solo  [(S A) (T B)]  {RH | (LH1 LH2)}
</pre>
<p></p>
<p class="Body">
If a single voice, surrounded by two voice groups, is preceded by a star
(<tt>*</tt>), the voice is marked to be floating. This means, that the voice
won't be printed on it's own staff; rather the software should
automatically determine for each note of the voice, whether it should be
printed on the preceding staff or on the following staff.
</p>
<p class="Body">
Software that does not support floating voices, may simply print the
voice on the preceding staff, as if it were part of the preceding voice
group.
</p>
<p class="Body">
Examples:
</p><pre>%%score {RH *M| LH}
%%score {(RH1 RH2) *M| (LH1 LH2)}
</pre>
<p></p>
<p class="Body">
String parts in an orchestral work are usually bracketed together and
the top two (1st/2nd violins) then braced outside the bracket:
</p>
<pre>%%score [{Vln1 | Vln2} | Vla | Vc | DB]
</pre>
<p class="Body">
Voices that appear in the tune body, but not in the score directive,
won't be printed. 
</p>
<p class="Body">
When the score directive occurs within the tune body, it resets the
music generator, so that voices may appear and disappear for some period
of time.
</p>
<p class="Body">
If no score directive is used, all voices that appear in the tune body
are printed on separate staves.
</p>
<p class="Body">
See <a href="#Canzonetta.abc">Canzonetta.abc</a> for an extensive example.
</p>
<!--  ''When we have a staff in treble clef followed by a staff in'' -->
<!--  ''bass clef, shouldn't we assume that these staves are separated by only'' -->
<!--  ''one ledger line (central C)? It would make piano music look so much'' -->
<!--  ''better, and we could use inter-staff slurs and arpeggios.'' -->
<!--  Bernard Hill <bernard@braeburn.co.uk> replied: -->
<!--  > 12. The grand clef (treble+bass) should NOT be one leger line apart as -->
<!--  > your comment. You can't write hymn tunes with tenors singing D at the -->
<!--  > same time as altos on B etc etc. It violates all known music layout : -->
<!--  > interstave arpeggios and slurs are going to have to be handled some -->
<!--  > other way. -->
<!--End Section 2-->
<h3><a name="Instrumentation directives">11.2. Instrumentation directives</a></h3>
<pre>%%MIDI voice [&lt;ID&gt;] [instrument=&lt;integer&gt; [bank=&lt;integer&gt;]] [mute]
</pre>
<p class="Body">
Assigns a MIDI instrument to the indicated ABC voice. The MIDI
instruments are organized in banks of 128 instruments each. Both the
instruments and the banks are numbered starting from one.
</p>
<p class="Body">
The General MIDI (GM) standard defines a portable, numbered set of 128
instruments; these are listed in section <a href="#General%20MIDI%20Instruments">General MIDI Instruments</a>. The
GM instruments can be used by selecting bank one. Since the contents of
the other MIDI banks is platform dependent, it is highly recommended to
only use the first MIDI bank in tunes that are to be distributed.
</p>
<p class="Body">
The default bank number is one.
</p>
<p class="Body">
Example:
</p><pre>%%MIDI voice Tb instrument=59
</pre>
assigns GM instrument 59 (tuba) to voice 'Tb'. 
<p></p>
<p class="Body">
If the voice ID is ommited, the instrument is assigned to the
current voice:
<!-- IO: adopted from the abcm2ps documentation -->
</p><pre>M:C
L:1/8
Q:1/4=66
K:C
V:Rueckpos
%%MIDI voice instrument=53 bank=2
A3B    c2c2    |d2e2    de/f/P^c3/d/|d8    |z8           |
V:Organo
%%MIDI voice instrument=73 bank=2
z2E2-  E2AG    |F2E2    F2E2        |F6  F2|E2CD   E3F/G/|
</pre>
<p></p>
<p class="Body">
You can use the keyword <tt>mute</tt> to mute the specified voice.
</p>
<p class="Body">
Some ABC players can automatically generate an accompaniment based on
the <a href="#chord%20symbols">chord symbols</a> specified in the melody line. To suggest a GM
instrument for playing this accompaniment, use the following directive:
</p>
<pre>%%MIDI chordprog 20 % Church organ
</pre>
<!--End Section 2-->
<h3><a name="Accidental directives">11.3. Accidental directives</a></h3>
<pre>%%propagate-accidentals not | octave | pitch
</pre>
<p class="Body">
When set to <tt>not</tt>, accidentals apply only to the note they're attached
to. When set to <tt>octave</tt>, accidentals also apply to all the notes of the
same pitch in the same octave up to the end of the bar. When set to
<tt>pitch</tt>, accidentals also apply to all the notes of the same pitch in
all octaves up to the end of the bar.
</p>
<p class="Body">
The default value is <tt>pitch</tt>.
</p>
<pre>%%writeout-accidentals none | added | all
</pre>
<p class="Body">
When set to <tt>none</tt>, modifying or explicit accidentals that appear in the
key signature field (<tt>K:</tt>) are printed in the key signature. When set to
<tt>added</tt>, only the accidentals belonging to the mode indicated in the <tt>K:</tt>
field, are printed in the key signature. Modifying or explicit
accidentals are printed in front of the notes to which they apply. When
set to <tt>all</tt>, both the accidentals belonging to the mode and possible
modifying or explicit accidentals are printed in front of the notes to
which they apply; no key signature will be printed.
</p>
<p class="Body">
The default value is <tt>none</tt>.
</p>
<!--End Section 2-->
<h3><a name="Formatting directives">11.4. Formatting directives</a></h3>
<p class="Body">
Typesetting programs should accept the set of directives in the next
sections. The parameter of a directive can be an ABC string, a logical
value '1' (true) or '0' (false), an integer number, a number with
decimals (just 'number' in the following), or a unit of length. Units
can be expressed in cm, in, and pt (points, 1/72 inch).
</p>
<p class="Body">
The following directives should be self-explanatory.
</p>
<p class="Body">
<em>TODO: ADD EXPLANATIONS.</em>
</p>
<!-- Start SectLevel3 -->
<h4><a name="Page Format">11.4.1. Page Format</a></h4>
<pre>%%pageheight       &lt;length&gt;
%%pagewidth        &lt;length&gt;
%%topmargin        &lt;length&gt;
%%botmargin        &lt;length&gt;
%%leftmargin       &lt;length&gt;
%%rightmargin      &lt;length&gt;
%%indent           &lt;length&gt;
%%landscape        &lt;logical&gt;
</pre>
<!--End Section 3-->
<h4><a name="Font Settings">11.4.2. Font Settings</a></h4>
<p class="Body">
PostScript and PDF are the standard file formats for distributing
printable material. For portability reasons, typesetters will use the
PostScript font names. The size paramater should be an integer, but
is optional.
</p>
<pre>%%titlefont        &lt;font name&gt;  &lt;size&gt;
%%subtitlefont     &lt;font name&gt;  &lt;size&gt;
%%composerfont     &lt;font name&gt;  &lt;size&gt;
%%partsfont        &lt;font name&gt;  &lt;size&gt;
%%tempofont        &lt;font name&gt;  &lt;size&gt;
%%gchordfont       &lt;font name&gt;  &lt;size&gt; % for chords symbols
%%annotationfont   &lt;font name&gt;  &lt;size&gt; % for "^..." annotations
%%infofont         &lt;font name&gt;  &lt;size&gt;
%%textfont         &lt;font name&gt;  &lt;size&gt;
%%vocalfont        &lt;font name&gt;  &lt;size&gt; % for w:
%%wordsfont        &lt;font name&gt;  &lt;size&gt; % for W:
</pre>
<p class="Body">
The specifiers <tt>$1</tt>, <tt>$2</tt>, <tt>$3</tt> and <tt>$4</tt> can be used to change the font
within an <a href="#ABC%20string">ABC string</a>. The font to be used can be specified with the
<tt>%%setfont-n</tt> directives. <tt>$0</tt> resets the font to its default
value. <tt>$$</tt> gives an actual dollar sign.
</p>
<pre>%%setfont-1        &lt;font name&gt;  &lt;size&gt;
%%setfont-2        &lt;font name&gt;  &lt;size&gt;
%%setfont-3        &lt;font name&gt;  &lt;size&gt;
%%setfont-4        &lt;font name&gt;  &lt;size&gt;
</pre>
<!--End Section 3-->
<h4><a name="Spaces">11.4.3. Spaces</a></h4>
<pre>%%topspace         &lt;length&gt;
%%titlespace       &lt;length&gt;
%%subtitlespace    &lt;length&gt;
%%composerspace    &lt;length&gt;
%%musicspace       &lt;length&gt; % between composer and 1st staff
%%partsspace       &lt;length&gt;
%%vocalspace       &lt;length&gt;
%%wordsspace       &lt;length&gt;
%%textspace        &lt;length&gt;
%%infospace        &lt;length&gt;
%%staffsep         &lt;length&gt; % between systems
%%sysstaffsep      &lt;length&gt; % between staves in the same system
%%barsperstaff     &lt;integer&gt;
%%parskipfac       &lt;number&gt; % space between parts
%%lineskipfac      &lt;number&gt; % space between lines of text
%%stretchstaff     &lt;logical&gt;
%%stretchlast      &lt;logical&gt;
%%maxshrink        &lt;number&gt; % shrinking notes
%%scale            &lt;number&gt;
</pre>
<!--End Section 3-->
<h4><a name="Measures">11.4.4. Measures</a></h4>
<pre>%%measurefirst     &lt;integer&gt; % number of first measure
%%barnumbers       &lt;integer&gt; % bar numbers every ''n'' measures
%%measurenb        &lt;integer&gt; % same as %%barnumbers
%%measurebox       &lt;logical&gt;
%%setbarnb         &lt;integer&gt; % set measure number
</pre>
<!--End Section 3-->
<h4><a name="Text">11.4.5. Text</a></h4>
<pre>%%text             &lt;ABC String&gt;
%%center           &lt;ABC String&gt;
%%begintext
%%...
%%endtext
%%sep
%%sep              &lt;number 1&gt; &lt;number 2&gt; &lt;number 3&gt;
%%vskip
%%vskip            &lt;number&gt;
%%newpage
</pre>
<p class="Body">
Notes:
</p>
<ul>
<li> <tt>%%text</tt> is followed by text that will be printed verbatim.</li>
<li> <tt>%%center</tt> prints the following text centered.</li>
<li> <tt>%%begintext</tt> and <tt>%%endtext</tt> mark a section of lines that start in <tt>%%</tt>, followed by text. It's an alternative to several <tt>%%text</tt> lines.</li>
<li> <tt>%%sep</tt> draws a separator, e.g. a horizontal line. If followed by three parameters, the line has <em>number 1</em> space above, <em>number 2</em> space below, and is long <em>number 3</em>.</li>
<li> <tt>%%vskip</tt> adds <em>number</em> space.</li>
<li> <tt>%%newpage</tt> starts a new page.</li>
</ul>
<!--End Section 3-->
<h4><a name="Misc">11.4.6. Misc</a></h4>
<pre>%%continueall      &lt;logical&gt; % ignore line breaks
%%exprabove        &lt;logical&gt;
%%exprbelow        &lt;logical&gt;
%%graceslurs       &lt;logical&gt; % grace notes slur to main note
%%infoline         &lt;logical&gt; % rhythm and origin on the same line
%%musiconly        &lt;logical&gt; % don't output lyrics
%%oneperpage       &lt;logical&gt;
%%vocalabove       &lt;logical&gt;
%%withxrefs        &lt;logical&gt; % print X: index in title
%%writehistory     &lt;logical&gt;
%%freegchord       &lt;logical&gt; % print '#', 'b' and '=' as they are
%%printtempo       &lt;logical&gt;
</pre>
<!--End Section 3-->
<!-- End SectLevel3 -->
<!--End Section 2-->
<h3><a name="Application specific directives">11.5. Application specific directives</a></h3>
<p class="Body">
Applications may introduce their own directives. These directives should
start with the name of the application, followed a colon, folowed by the
name of the directive.
</p>
<p class="Body">
Example:
</p><pre>%%noteedit:fontcolor  blue
</pre>
<p></p>
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="Portability Issues">12. Portability Issues</a></h2>
<p class="Body">
The lack of a well-defined ABC standard wouldn't be a problem, were ABC a
human-only notation system. People are smart and flexible (mostly). But
when it comes to computer programs, the situation is critical.
</p>
<p class="Body">
Unfortunately, minor variations of the ABC syntax are commonly found. This
makes applications slightly incompatible with each other. Obviously, we
want ABC files to be readable by as many programs as possible.
</p>
<p class="Body">
Some basic suggestions are:
</p>
<ul>
<li> please <em>do not use</em> package-specific commands if you plan to distribute your ABC files.</li>
<li> please use a text preprocessor to isolate and/or remove package-specific features.</li>
<li> please stick to standard file formats: PDF and PostScript give the 
best results for printing, PNG and JPG are acceptable; MIDI is probably 
the only sensible option for audible output.</li>
<li> if you are a programmer, please try and write cross-platform ABC programs.</li>
<li> if you are a programmer, please try to make your ABC programs  compatible with others.</li>
</ul>
<hr>
<!--End Section 1-->
<h2><a name="Sample ABC Tunes">13. Sample ABC Tunes</a></h2>
<p class="Body">
<em><strong>NOTE</strong>: The samples still need to be edited to conform to the</em>
<em>standard!</em>
</p>
<!-- Start SectLevel2 -->
<h3><a name="English.abc">13.1. English.abc</a></h3>
<pre>H:This file contains some example English tunes
O:E                   % mark all tunes with an E (English) for the index

X:1                   % tune no 1
T:Dusty Miller, The   % title
T:Binny's Jig         % an alternative title
C:Trad.               % traditional
R:DH                  % double hornpipe
M:3/4                 % meter
K:G                   % key
B&gt;cd BAG|FA Ac BA|B&gt;cd BAG|DG GB AG:|\
Bdd gfg|aA Ac BA|Bdd gfa|gG GB AG:|
BG G/2G/2G BG|FA Ac BA|BG G/2G/2G BG|DG GB AG:|
W:Hey, the dusty miller, and his dusty coat;
W:He will win a shilling, or he spend a groat.
W:Dusty was the coat, dusty was the colour;
W:Dusty was the kiss, that I got frae the miller.


X:2
T:Old Sir Simon the King
C:Trad.
S:Offord MSS          % from Offord manuscript
N:see also Playford   % reference note
M:9/8
R:SJ                  % slip jig
N:originally in C     % transcription note
K:G
D|GFG GAG G2D|GFG GAG F2D|EFE EFE EFG|A2G F2E D2:|
D|GAG GAB d2D|GAG GAB c2D|[1 EFE EFE EFG|A2G F2E D2:|\
M:12/8                % change meter for a bar
[2 E2E EFE E2E EFG|\
M:9/8                 % change back again
A2G F2E D2|]

X:3
T:William and Nancy
T:New Mown Hay
T:Legacy, The
C:Trad.
O:Bledington, Gloucestershire % place of origin
B:Sussex Tune Book            % also in these books
B:Mally's Cotswold Morris vol.1 2
D:Morris On                   % you can hear it on this record
P:(AB)2(AC)2A                 % play the parts in this order
M:6/8
K:G
P:A                   % part A
D|"G"G2G GBd|"C"e2e "G"dBG|"D7"A2d "G"BAG|"C"E2"D7"F "G"G2:|
P:B                   % part B
d|"G"e2d B2d|"C"gfe "G"d2d| "G"e2d    B2d|"C"gfe    "D7"d2c|\
  "G"B2B Bcd|"C"e2e "G"dBG|"D7"A2d "G"BAG|"C"E2"D7"F "G"G2:|
T:Slows
M:4/4                 % change meter
L:1/4                 % and default note length
P:C                   % part C
"G"d2|"C"e2 "G"d2|B2 d2|"Em"gf "A7"e2|"D7"d2 "G"d2|"C"e2 "G"d2|\
M:3/8
L:1/8
"G"B2d|\
M:6/8
"C"gfe "D7"d2c|\
  "G"B2B Bcd|"C"e2e "G"dBG|"D7"A2d "G"BAG|"C"E2"D7"F "G"G2:|
</pre>
<!--End Section 2-->
<h3><a name="Strspys.abc">13.2. Strspys.abc</a></h3>
<pre>M:4/4
O:S
R:Ss

X:1
T:A. A. Cameron's
K:D
e&lt;A A2 B&gt;G d&gt;B|e&lt;A A2 d&gt;g (3fed|e&lt;A A2 B&gt;G d&gt;B|B&lt;G G&gt;B d&gt;g (3fed:|
B&lt;e e&gt;f g&gt;e a&gt;f|B&lt;e e&gt;f g&gt;e (3fed|B&lt;e e&gt;f g&gt;e a&gt;f|d&lt;B G&gt;B d&gt;g (3fed:|

X:2
T:Atholl Brose
K:D
{gcd}c&lt;{e}A {gAGAG}A2 {gef}e&gt;A {gAGAG}Ad|\
{gcd}c&lt;{e}A {gAGAG}A&gt;e {ag}a&gt;f {gef}e&gt;d|\
{gcd}c&lt;{e}A {gAGAG}A2 {gef}e&gt;A {gAGAG}Ad|\
{g}c/d/e {g}G&gt;{d}B {gf}gG {dc}d&gt;B:|\
{g}c&lt;e {gf}g&gt;e {ag}a&gt;e {gf}g&gt;e|\
{g}c&lt;e {gf}g&gt;e {ag}a2 {GdG}a&gt;d|\
{g}c&lt;e {gf}g&gt;e {ag}a&gt;e {gf}g&gt;f|\
{gef}e&gt;d {gf}g&gt;d {gBd}B&lt;{e}G {dc}d&gt;B|\
{g}c&lt;e {gf}g&gt;e {ag}a&gt;e {gf}g&gt;e|\
{g}c&lt;e {gf}g&gt;e {ag}a2 {GdG}ad|\
{g}c&lt;{GdG}e {gf}ga {f}g&gt;e {g}f&gt;d|\
{g}e/f/g {Gdc}d&gt;c {gBd}B&lt;{e}G {dc}d2|]\
</pre>
<!--End Section 2-->
<h3><a name="Reels.abc">13.3. Reels.abc</a></h3>
<pre>M:4/4
O:I
R:R

X:1
T:Untitled Reel
C:Trad.
K:D
eg|a2ab ageg|agbg agef|g2g2 fgag|f2d2 d2:|\
ed|cecA B2ed|cAcA E2ed|cecA B2ed|c2A2 A2:|
K:G
AB|cdec BcdB|ABAF GFE2|cdec BcdB|c2A2 A2:|

X:2
T:Kitchen Girl
C:Trad.
K:D
[c4a4] [B4g4]|efed c2cd|e2f2 gaba|g2e2 e2fg|
a4 g4|efed cdef|g2d2 efed|c2A2 A4:|
K:G
ABcA BAGB|ABAG EDEG|A2AB c2d2|e3f edcB|ABcA BAGB|
ABAG EGAB|cBAc BAG2|A4 A4:|
</pre>
<!--End Section 2-->
<h3><a name="Canzonetta.abc">13.4. Canzonetta.abc</a></h3>
<pre>% canzonetta.abc
%%pagewidth      21cm
%%pageheight     29.7cm
%%topspace       0.5cm
%%topmargin      1cm
%%botmargin      0cm
%%leftmargin     1cm
%%rightmargin    1cm
%%titlespace     0cm
%%titlefont      Times-Bold 32
%%subtitlefont   Times-Bold 24
%%composerfont   Times 16
%%vocalfont      Times-Roman 14
%%staffsep       60pt
%%sysstaffsep    20pt
%%musicspace     1cm
%%vocalspace     5pt
%%measurenb      0
%%barsperstaff   5
%%scale          0.7
X: 1
T: Canzonetta a tre voci
C: Claudio Monteverdi (1567-1643)
M: C
L: 1/4
Q: "Andante mosso" 1/4 = 110
%%staves [1|2|3]
V: 1 clef=treble name="Soprano"sname="A"
V: 2 clef=treble name="Alto"   sname="T"
V: 3 clef=bass   name="Tenor"  sname="B"
%%MIDI program 1 75 % recorder
%%MIDI program 2 75
%%MIDI program 3 75
K: Eb
% 1 - 4
[V: 1] |:z4  |z4  |f2ec         |_ddcc        |
w: Son que-sti~i cre-spi cri-ni~e
w: Que-sti son gli~oc-chi che mi-
[V: 2] |:c2BG|AAGc|(F/G/A/B/)c=A|B2AA         |
w: Son que-sti~i cre-spi cri-ni~e que - - - - sto~il vi-so e
w: Que-sti son~gli oc-chi che mi-ran - - - - do fi-so mi-
[V: 3] |:z4  |f2ec|_ddcf        |(B/c/_d/e/)ff|
w: Son que-sti~i cre-spi cri-ni~e que - - - - sto~il
w: Que-sti son~gli oc-chi che mi-ran - - - - do
% 5 - 9
[V: 1] cAB2     |cAAA |c3B|G2!fermata!Gz ::e4|
w: que-sto~il vi-so ond' io ri-man-go~uc-ci-so. Deh,
w: ran-do fi-so, tut-to re-stai con-qui-so.
[V: 2] AAG2     |AFFF |A3F|=E2!fermata!Ez::c4|
w: que-sto~il vi-so ond' io ri-man-go~uc-ci-so. Deh,
w: ran-do fi-so tut-to re-stai con-qui-so.
[V: 3] (ag/f/e2)|A_ddd|A3B|c2!fermata!cz ::A4|
w: vi - - - so ond' io ti-man-go~uc-ci-so. Deh,
w: fi - - - so tut-to re-stai con-qui-so.
% 10 - 15
[V: 1] f_dec |B2c2|zAGF  |\
w: dim-me-lo ben mi-o, che que-sto\
=EFG2          |1F2z2:|2F8|] % more notes
w: sol de-si-o_. % more lyrics
[V: 2] ABGA  |G2AA|GF=EF |(GF3/2=E//D//E)|1F2z2:|2F8|]
w: dim-me-lo ben mi-o, che que-sto sol de-si - - - - o_.
[V: 3] _dBc&gt;d|e2AF|=EFc_d|c4             |1F2z2:|2F8|]
w: dim-me-lo ben mi-o, che que-sto sol de-si-o_.
</pre>
<hr>
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<h2><a name="Appendix">14. Appendix</a></h2>
<!-- Start SectLevel2 -->
<h3><a name="General MIDI Instruments">14.1. General MIDI Instruments</a></h3>
<p class="Body">
Standard General MIDI (GM) instrument numbers:
</p>
<pre>Prog#   Instrument            Prog#    Instrument
 
 PIANO                           CHROMATIC PERCUSSION
1    Acoustic Grand             9   Celesta
2    Bright Acoustic           10   Glockenspiel
3    Electric Grand            11   Music Box
4    Honky-Tonk                12   Vibraphone
5    Electric Piano 1          13   Marimba
6    Electric Piano 2          14   Xylophone
7    Harpsichord               15   Tubular Bells
8    Clavinet                  16   Dulcimer
 
  ORGAN                          GUITAR
17   Drawbar Organ             25   Nylon String Guitar
18   Percussive Organ          26   Steel String Guitar
19   Rock Organ                27   Electric Jazz Guitar
20   Church Organ              28   Electric Clean Guitar
21   Reed Organ                29   Electric Muted Guitar
22   Accoridan                 30   Overdriven Guitar
23   Harmonica                 31   Distortion Guitar
24   Tango Accordian           32   Guitar Harmonics
 
  BASS                           SOLO STRINGS
33   Acoustic Bass             41   Violin
34   Electric Bass(finger)     42   Viola
35   Electric Bass(pick)       43   Cello
36   Fretless Bass             44   Contrabass
37   Slap Bass 1               45   Tremolo Strings
38   Slap Bass 2               46   Pizzicato Strings
39   Synth Bass 1              47   Orchestral Strings
40   Synth Bass 2              48   Timpani

  ENSEMBLE                       BRASS
49   String Ensemble 1         57   Trumpet
50   String Ensemble 2         58   Trombone
51   SynthStrings 1            59   Tuba
52   SynthStrings 2            60   Muted Trumpet
53   Choir Aahs                61   French Horn
54   Voice Oohs                62   Brass Section
55   Synth Voice               63   SynthBrass 1
56   Orchestra Hit             64   SynthBrass 2

  REED                           PIPE
65   Soprano Sax               73   Piccolo
66   Alto Sax                  74   Flute
67   Tenor Sax                 75   Recorder
68   Baritone Sax              76   Pan Flute
69   Oboe                      77   Blown Bottle
70   English Horn              78   Skakuhachi
71   Bassoon                   79   Whistle
72   Clarinet                  80   Ocarina

  SYNTH LEAD                     SYNTH PAD
81   Lead 1 (square)           89   Pad 1 (new age)
82   Lead 2 (sawtooth)         90   Pad 2 (warm)
83   Lead 3 (calliope)         91   Pad 3 (polysynth)
84   Lead 4 (chiff)            92   Pad 4 (choir)
85   Lead 5 (charang)          93   Pad 5 (bowed)
86   Lead 6 (voice)            94   Pad 6 (metallic)
87   Lead 7 (fifths)           95   Pad 7 (halo)
88   Lead 8 (bass+lead)        96   Pad 8 (sweep)
 
   SYNTH EFFECTS                  ETHNIC
 97  FX 1 (rain)               105   Sitar
 98  FX 2 (soundtrack)         106   Banjo
 99  FX 3 (crystal)            107   Shamisen
100  FX 4 (atmosphere)         108   Koto
101  FX 5 (brightness)         109   Kalimba
102  FX 6 (goblins)            110   Bagpipe
103  FX 7 (echoes)             111   Fiddle
104  FX 8 (sci-fi)             112   Shanai

   PERCUSSIVE                     SOUND EFFECTS
113  Tinkle Bell               121   Guitar Fret Noise
114  Agogo                     122   Breath Noise
115  Steel Drums               123   Seashore
116  Woodblock                 124   Bird Tweet
117  Taiko Drum                125   Telephone Ring
118  Melodic Tom               126   Helicopter
119  Synth Drum                127   Applause
120  Reverse Cymbal            128   Gunshot
</pre>
<p class="Body">
This list was taken from
<a href="http://www.borg.com/%7Ejglatt/tutr/gm.htm">http://www.borg.com/~jglatt/tutr/gm.htm</a>
</p>
<p class="Body">
Note that although the instruments are internally numbered
from 0 - 127, the MIDI standard suggests that the user should
select them with the numbers 1 - 128, since human beings count
from 1 rather than 0.
</p>
<!--  IO: Since this ABC standard does not support -->
<!--  %%MIDI drum directives, the GM percussion sounds -->
<!--  cannot be selected. Therefore I removed the list -->
<!--  with percussion sounds. -->
<!--End Section 2-->
<h3><a name="Full table of accented letters">14.2. Full table of accented letters</a></h3>
<p class="Body">
Programs that have difficulty typesetting accented letters may reduce
them to the base letter. <tt>\"y</tt> can be reduced to <tt>y</tt>, <tt>\oA</tt> can be
reduced to <tt>A</tt>, etc. Ligatures can be reduced by simply ignoring the
backslash: <tt>\ss</tt> becomes <tt>ss</tt>, <tt>\AE</tt> becomes <tt>AE</tt>, etc.
</p>
<p class="Body">
Here follows the full table of supported accents:
</p>
<img src="abc2-draft_files/symtab1.png" alt="" align="bottom">
<img src="abc2-draft_files/symtab2.png" alt="" align="bottom">
<img src="abc2-draft_files/symtab3.png" alt="" align="bottom">
<img src="abc2-draft_files/symtab4.png" alt="" align="bottom">
<p class="Body">
The uppercase variants of accented letters can be obtained by simply
putting the last letter in uppercase. Note that <tt>\.I</tt> produces an
uppercase I with a dot on it. The uppercase variants of ligatures can be
obtained by putting both letters in uppercase.
</p>
<p class="Body">
To get an actual backslash, type <tt>\\</tt>.
</p>
<p class="Body">
The table is based on:
</p><ul>
<li> <a href="http://www.alanwood.net/unicode/latin_extended_a.html">http://www.alanwood.net/unicode/latin_extended_a.html</a></li>
</ul>
<p></p>
<p class="Body">
<em>End of draft. Features still missing are, at least:</em>
<em>repeated tuplets, octava indications, optional</em>
<em>accidentals/slurs, microtonal accidentals, tabulatures,</em>
<em>guitar chords diagrams, Gregorian chant, ...</em>
</p>
<!--End Section 2-->
<!-- End SectLevel2 -->
<!--End Section 1-->
<!-- End SectLevel1 -->
<br>
<p align="right"> <small>This document was generated using <a href="http://www.maplefish.com/todd/aft.html">AFT v5.09</a></small> </p>



</body></html>